#https://t.me/Lord_broo
#@Lord_Ali2
import base64
exec(base64.b64decode('aW1wb3J0IHJlcXVlc3RzLGJzNCxqc29uLG9zLHN5cyxyYW5kb20sZGF0ZXRpbWUsdGltZSxyZQppbXBvcnQgdXJsbGliMyxyaWNoLGJhc2U2NApmcm9tIHJpY2gudGFibGUgaW1wb3J0IFRhYmxlIGFzIG1lCmZyb20gcmljaC5jb25zb2xlIGltcG9ydCBDb25zb2xlIGFzIHNvbApmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cCBhcyBzb3AKZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAgYXMgcGFyc2VyCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3IgYXMgdHJlZApmcm9tIHJpY2guY29uc29sZSBpbXBvcnQgR3JvdXAgYXMgZ3AKZnJvbSByaWNoLnBhbmVsIGltcG9ydCBQYW5lbCBhcyBuZWwKZnJvbSByaWNoIGltcG9ydCBwcmludCBhcyBjZXRhawpmcm9tIHJpY2gubWFya2Rvd24gaW1wb3J0IE1hcmtkb3duIGFzIG1hcmsKZnJvbSByaWNoLmNvbHVtbnMgaW1wb3J0IENvbHVtbnMgYXMgY29sCmZyb20gcmljaCBpbXBvcnQgcHJpbnQgYXMgcnByaW50CmZyb20gcmljaCBpbXBvcnQgcHJldHR5CmZyb20gcmljaC50ZXh0IGltcG9ydCBUZXh0IGFzIHRla3oKaW1wb3J0IG9zCm5vdyA9IGRhdGV0aW1lLmRhdGV0aW1lLnRvZGF5KCkKbW0gPSBzdHIobm93Lm1vbnRoKQpkZCA9IHN0cihub3cuZGF5KQp5eXl5ID0gc3RyKG5vdy55ZWFyKQpob3VyID0gc3RyKG5vdy5ob3VyKQptaSA9IHN0cihub3cubWludXRlKQpzcyA9IHN0cihub3cuc2Vjb25kKQoKdD0obW0gKyAiLyIgKyBkZCArICIvIiArIHl5eXkgKyAiICIgKyBob3VyICsgIjoiICsgbWkgKyAiOiIgKyBzcykKCgpob3VycyA9IChub3cuaG91cikKeCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpCmc9IGRhdGV0aW1lLmRhdGV0aW1lKDIwMjMsIDgsIDEwLCAxLCAwMCAsMCkKCmlmICh4LnN0cmZ0aW1lKCIleCIpKT4oZy5zdHJmdGltZSgiJXgiKSk6CiBwcmludCgnXG5cbicpCiBwcmludCgiICAgICAiKycg2KfZhtiq2YfYpiDYp9mE2KrZgdi52YrZhCAg8J+WpCcgKQogcHJpbnQoJ1xuXG4nKQogcHJpbnQoeCkKIAogc3lzLmV4aXQoMCkKIAoKaWYgKHguc3RyZnRpbWUoIiV4IikpPT0oZy5zdHJmdGltZSgiJXgiKSk6CiAgIHByaW50KCcnKQogICBpZih4LnN0cmZ0aW1lKCIlWCIpKT4oZy5zdHJmdGltZSgiJVgiKSk6CiAgICBwcmludCgnXG5cbicpCiAgICBwcmludCgiICAgICAiKycg2KfZhtiq2YfYqiDYp9mE2LXZhNin2K3ZitmHINi52YTZitmDINio2YXYsdin2LPZhNmHINin2YTZhdi32YjYsdmE2YTYrdi12YjZhCDYudmE2Ykg2KfYrdiv2Ksg2YbYs9iu2YcgQEZHX29uIPCflqQnICkKICAgIHByaW50KCdcblxuJykKICAgIHByaW50KHgpCiAgICAKICAgIHN5cy5leGl0KDApCiAgIGVsc2U6CiAgICBwcmludCgnJykgIAplbHNlOgogICAgcHJpbnQoJycpCnByaW50KCcnKQp0cnk6CglpbXBvcnQgcmVxdWVzdHMKZXhjZXB0IEltcG9ydEVycm9yOgoJWiA9ICdcMDMzWzE7MzFtJyAj2KfYrdmF2LEKUiA9ICdcMDMzWzE7MzFtJyAj2KfYrdmF2LEKWCA9ICdcMDMzWzE7MzNtJyAj2KfYtdmB2LEKRiA9ICdcMDMzWzI7MzJtJyAj2KfYrti22LEKQyA9ICJcMDMzWzE7OTdtIiAj2KfYqNmK2LYKQiA9ICdcMDMzWzI7MzZtJyPYs9mF2KfYptmKClkgPSAnXDAzM1sxOzM0bScgI9in2LLYsdmCINmB2KfYqtitLgpFID0gJ1wwMzNbMTszMW0nCkIgPSAnXDAzM1syOzM2bScKRyA9ICdcMDMzWzE7MzJtJwpTID0gJ1wwMzNbMTszM20nCnByaW50KCdcbicpCnRva2VuPWlucHV0KEIrJ3Rva2VuIDogJytGKQpwcmludCgnXG4nKQpJRD1pbnB1dChCKydJRCAgICA6ICcrRikKb3Muc3lzdGVtKCdjbGVhcicpCmNldGFrKG5lbCgnXHTigKIgU2VkYW5nIE1lbmdpbnN0YWxsIE1vZHVsIFJlcXVlc3RzIOKAoicpKQoKCnByZXR0eS5pbnN0YWxsKCkKQ09OPXNvbCgpCnVnZW4yPVtdCnVnZW49W10KY29rYnJ1dD1bXQpzZXM9cmVxdWVzdHMuU2Vzc2lvbigpCnByaW5jcD1bXQp0cnk6Cglwcm94PSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vYXBpLnByb3h5c2NyYXBlLmNvbS92Mi8/cmVxdWVzdD1kaXNwbGF5cHJveGllcyZwcm90b2NvbD1zb2NrczQmdGltZW91dD0xMDAwMDAmY291bnRyeT1hbGwmc3NsPWFsbCZhbm9ueW1pdHk9YWxsJykudGV4dAoJCmV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCXByaW50KCfwnZm18J2ZsPCdmbLwnZm08J2ZsfCdmb7wnZm+8J2ZuicpCgpmb3IgeGQgaW4gcmFuZ2UoMTAwMDApOgoJYT0nTW96aWxsYS81LjAgKFN5bWJpYW4vMzsgU2VyaWVzNjAvJwoJYj1yYW5kb20ucmFuZHJhbmdlKDEsIDkpCgljPXJhbmRvbS5yYW5kcmFuZ2UoMSwgOSkKCWQ9J05va2lhJwoJZT1yYW5kb20ucmFuZHJhbmdlKDEwMCwgOTk5OSkKCWY9Jy8xMTAuMDIxLjAwMjg7IFByb2ZpbGUvTUlEUC0yLjEgQ29uZmlndXJhdGlvbi9DTERDLTEuMSApIEFwcGxlV2ViS2l0LzUzNS4xIChLSFRNTCwgbGlrZSBHZWNrbykgTm9raWFCcm93c2VyLycKCWc9cmFuZG9tLnJhbmRyYW5nZSgxLCA5KQoJaD1yYW5kb20ucmFuZHJhbmdlKDEsIDQpCglpPXJhbmRvbS5yYW5kcmFuZ2UoMSwgNCkKCWo9cmFuZG9tLnJhbmRyYW5nZSgxLCA0KQoJaz0nTW9iaWxlIFNhZmFyaS81MzUuMScKCXVha3U9KGYne2F9e2J9LntjfSB7ZH17ZX17Zn17Z30ue2h9LntpfS57an0ge2t9JykKCXVnZW4yLmFwcGVuZCh1YWt1KQoKCglhYT0nTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkJwoJYj1yYW5kb20uY2hvaWNlKFsnMicsJzMnLCc0JywnNScsJzUuMicsJzYnLCc2LjAuMScsJzcnLCc4JywnOScsJzEwJywnMTEnLCcxMScsJzExLjAuMScsJzEyJywnMTMnXSkKCWM9cmFuZG9tLmNob2ljZShbJ09QUE8gQTU3IEJ1aWxkL01NQjI5TTsgd3YnXSkKCWQ9J0FwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS8nCgllPXJhbmRvbS5yYW5kcmFuZ2UoODAsMTA2KQoJZj0nMCcKCWc9cmFuZG9tLnJhbmRyYW5nZSgzOTA0LDUwMDApCgloPXJhbmRvbS5yYW5kcmFuZ2UoNDAsMTAwKQoJaT0nTVFRQnJvd3Nlci82LjIgVEJTLzA0NTcxMyBNb2JpbGUgU2FmYXJpLzUzNy4zNiBNTVdFQklELzQzODMgTWljcm9NZXNzZW5nZXIvOC4wLjEwLjE5NjAoMHgyODAwMEEzRCkgUHJvY2Vzcy90b29scyBXZUNoYXQvYXJtNjQgV2VpeGluIE5ldFR5cGUvV0lGSSBMYW5ndWFnZS96aF9DTiBBQkkvYXJtNjQnCgl1YWt1Mj1mJ3thYX0ge2J9OyB7Y30pIHtkfXtlfS57Zn0ue2d9LntofSB7aX0nCgl1Z2VuLmFwcGVuZCh1YWt1MikKZm9yIHggaW4gcmFuZ2UoMTApOgoJYT0nTW96aWxsYS81LjAgKFNBTVNVTkc7IFNBTVNVTkctU00tJwoJYj1yYW5kb20ucmFuZHJhbmdlKDEwMCwgOTk5OSkKCWM9cmFuZG9tLnJhbmRyYW5nZSgxMDAsIDk5OTkpCglkPXJhbmRvbS5jaG9pY2UoWydBJywnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddKQoJZT1yYW5kb20uY2hvaWNlKFsnQScsJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXSkKCWY9cmFuZG9tLmNob2ljZShbJ0EnLCdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1UnLCAnVicsICdXJywgJ1gnLCAnWScsICdaJ10pCglnPXJhbmRvbS5jaG9pY2UoWydBJywnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddKQoJaD1yYW5kb20ucmFuZHJhbmdlKDEsIDkpCglpPSc7IFU7IEJhZGEvMS4yOyBlbi11cykgQXBwbGVXZWJLaXQvNTMzLjEgKEtIVE1MLCBsaWtlIEdlY2tvKSBEb2xmaW4vJwoJaj1yYW5kb20ucmFuZHJhbmdlKDEsIDkpCglrPXJhbmRvbS5yYW5kcmFuZ2UoMSwgOSkKCWw9J01vYmlsZSBXVkdBIFNNTS1NTVMvMS4yLjAgT1BOLUInCgl1YWs9Zid7YX17Yn0ve2N9e2R9e2V9e2Z9e2d9e2h9e2l9e2p9LntrfSB7bH0nCgoJCQojLS0tLS0tLS0tLS0tWyBhbGkgXS0tLS0tLS0tLS0tLS0tLSMKaWQsaWQyLGxvb3Asb2ssY3AsYWt1bixvcHJlayxtZXRob2QsbGlzZW5zaWt1LHRhcGxpa2FzaSx0b2tlbmt1LHVpZCxsaXNlbnNpa3VuaT0gW10sW10sMCwwLDAsW10sW10sW10sW10sW10sW10sW10sW10KY29rYnJ1dD1bXQpwd3BsdXNzLHB3bnlhPVtdLFtdCiMtLS0tLS0tLS0tLS1bIGFsaSBdLS0tLS0tLS0tLS0tLS0jClAgPSAnXHgxYlsxOzk3bScKTSA9ICdceDFiWzE7OTFtJwpIID0gJ1x4MWJbMTs5Mm0nCksgPSAnXHgxYlsxOzkzbScKQiA9ICdceDFiWzE7OTRtJwpVID0gJ1x4MWJbMTs5NW0nIApPID0gJ1x4MWJbMTs5Nm0nCk4gPSAnXHgxYlswbScgICAgClogPSAiXDAzM1sxOzMwbSIKc2lyID0gJ1wwMzNbNDFtXHgxYlsxOzk3bScKeCA9ICdcMzNbbScgIyBERUZBVUxUCm0gPSAnXHgxYlsxOzkxbScgI1JFRCArCmsgPSAnXDAzM1s5M20nICMgS1VOSU5HICsKaCA9ICdceDFiWzE7OTJtJyAjIEhJSkFVICsKaGggPSAnXDAzM1szMm0nICMgSElKQVUgLQp1ID0gJ1wwMzNbOTVtJyAjIFVOR1UKa2sgPSAnXDAzM1szM20nICMgS1VOSU5HIC0KYiA9ICdcMzNbMTs5Nm0nICMgQklSVSAtCnAgPSAnXHgxYlswOzM0bScgIyBCSVJVICsKYXN1ID0gcmFuZG9tLmNob2ljZShbbSxrLGgsdSxiXSkKIy0tLS0tLS0tLS0tLS0tLS0tLS0tWyBhbGkgXS0tLS0tLS0tLS0tLS0tIwpkaWMgPSB7JzEnOidKYW51YXJ5JywnMic6J0ZlYnJ1YXJ5JywnMyc6J01hcmNoJywnNCc6J0FwcmlsJywnNSc6J01heScsJzYnOidKdW5lJywnNyc6J0p1bHknLCc4JzonQXVndXN0JywnOSc6J1NlcHRlbWJlcicsJzEwJzonT2N0b2JlcicsJzExJzonTm92ZW1iZXInLCcxMic6J0RlY2VtYmVyJ30KZGljMiA9IHsnMDEnOidKYW51YXJ5JywnMDInOidGZWJydWFyeScsJzAzJzonTWFyY2gnLCcwNCc6J0FwcmlsJywnMDUnOidNYXknLCcwNic6J0p1bmUnLCcwNyc6J0p1bHknLCcwOCc6J0F1Z3VzdCcsJzA5JzonU2VwdGVtYmVyJywnMTAnOidPY3RvYmVyJywnMTEnOidOb3ZlbWJlcicsJzEyJzonRGV2ZW1iZXInfQp0Z2wgPSBkYXRldGltZS5kYXRldGltZS5ub3coKS5kYXkKYmxuID0gZGljWyhzdHIoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkubW9udGgpKV0KdGhuID0gZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkueWVhcgpva2MgPSAnT0stJytzdHIodGdsKSsnLScrc3RyKGJsbikrJy0nK3N0cih0aG4pKycudHh0JwpjcGMgPSAnQ1AtJytzdHIodGdsKSsnLScrc3RyKGJsbikrJy0nK3N0cih0aG4pKycudHh0JwojLS0tLS0tLS0tLS0tLS0tLS0tWyBhbGkgXS0tLS0tLS0tLS0tLS0tLSMKCgppbXBvcnQgb3MKdHJ5OgogICAgaW1wb3J0IHJlcXVlc3RzCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHByaW50KCJcbltceDFiWzE7OTFtIVx4MWJbMG1dIHR1bmdndSBzZWJlbnRhciBzZWRhbmcgbWVuZ2luc3RhbGwgcmVxdWVzdHNcbiIpCiAgICBvcy5zeXN0ZW0oInBpcCBpbnN0YWxsIHJlcXVlc3RzIikKCnRyeToKICAgIGltcG9ydCByaWNoCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIHByaW50KCJcbltceDFiWzE7OTFtIVx4MWJbMG1dIHR1bmdndSBzZWJlbnRhciBzZWRhbmcgbWVuZ2luc3RhbGwgcmljaFxuIikKICAgIG9zLnN5c3RlbSgicGlwIGluc3RhbGwgcmljaCIpCgppbXBvcnQgcmVxdWVzdHMsIHN5cywgdGltZSwgcmUsIHJhbmRvbQpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIE1vZG9sCmZyb20gcmljaC5wcm9ncmVzcyBpbXBvcnQgUHJvZ3Jlc3MsIFRleHRDb2x1bW4KZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAgYXMgcGFyCmZyb20gdGltZSBpbXBvcnQgdGltZSBhcyBtZWsKCk0gPSAnXHgxYlsxOzkxbScgIyBNRVJBSApPID0gJ1x4MWJbMTs5Nm0nICMgQklSVSBNVURBCk4gPSAnXHgxYlswbScgICAgIyBXQVJOQSBNQVRJCkggPSAnXHgxYlsxOzkybScgIyBISUpBVQpLID0gJ1x4MWJbMTs5M20nICMgS1VOSU5HCgpjbGFzcyBMb2dpbjoKCiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5zZXM9cmVxdWVzdHMuU2Vzc2lvbigpCiAgICAgICAgc2VsZi51cmwgPSAiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIgogICAgICAgIHNlbGYuaWQsIHNlbGYub2ssIHNlbGYuY3AsIHNlbGYubG8gPSBbXSwgW10sIFtdLCAwCiAgICAgICAgc2VsZi5jb2sgPSAiaHR0cHM6Ly9hcGktY2RuLWZiLnlheWFueGQubXkuaWQvc3VibWl0LnBocCIKICAgICAgICBzZWxmLmtvbnRvbCwgc2VsZi5peWEsIHNlbGYucGFzdyA9IHt9LCBbXSwgW10KICAgICAgICBzZWxmLm1lbnUoKQoKICAgIGRlZiBoYXB1cyhzZWxmKToKICAgICAgICB0cnk6b3MucmVtb3ZlKCJvay5jb2tpLnR4dCIpO29zLnJlbW92ZSgiLklELnR4dCIpCiAgICAgICAgZXhjZXB0OnBhc3MKCiAgICBkZWYgbG9nb28oc2VsZik6CiAgICAgICAgaWYgIndpbiIgaW4gc3lzLnBsYXRmb3JtOm9zLnN5c3RlbSgiY2xzIikKICAgICAgICBlbHNlOm9zLnN5c3RlbSgiY2xlYXIiKQogICAgICAgIAoKICAgIGRlZiBsb2dpbl9jb2tpZShzZWxmKToKICAgICAgICBzZWxmLmxvZ29vKCkKICAgICAgICBwcmludCgnJykKICAgICAgICBwcmludCgnJykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNvayA9IGlucHV0KCJbPD5dIGNvb2tpZSA+PiAiKQogICAgICAgICAgICBsaW5rID0gc2VsZi5zZXMuZ2V0KGYie3NlbGYudXJsfS9wcm9maWxlLnBocD92PWluZm8iLCBjb29raWVzPXsiY29va2llIjogY29rfSkudGV4dAogICAgICAgICAgICBpZiAnaHJlZj0iL3plcm8vb3B0aW4vd3JpdGUvJyBpbiBzdHIobGluayk6CiAgICAgICAgICAgICAgICBwcmludCgiWzw+XSBub3RpY2U6IGFuZGEgc2VkYW5nIG1lbmdndW5ha2FuIG1vZGUgZnJlZSBmYWNlYm9vayIpCiAgICAgICAgICAgICAgICBwcmludCgiWzw+XSBNb2hvbiB0dW5nZ3Ugc2ViZW50YXIsIHN5c3RlbSBzZWRhbmcgbWVuZ3ViYWggY29va2llIGtlIG1vZGUgZGF0YS4iKQogICAgICAgICAgICAgICAgdXJsbCA9IHJlLnNlYXJjaCgnaHJlZj0iL3plcm8vb3B0aW4vd3JpdGUvPyguKj8pIicsIHN0cihsaW5rKSkuZ3JvdXAoMSkucmVwbGFjZSgiYW1wOyIsICIiKQogICAgICAgICAgICAgICAgZ2V0dCA9IHNlbGYuc2VzLmdldChmIntzZWxmLnVybH0vemVyby9vcHRpbi93cml0ZS97dXJsbH0iLCBjb29raWVzPXsiY29va2llIjogY29rfSkudGV4dAogICAgICAgICAgICAgICAgcG9zcyA9IHBhcihnZXR0LCAiaHRtbC5wYXJzZXIiKS5maW5kKCJmb3JtIix7Im1ldGhvZCI6InBvc3QifSlbImFjdGlvbiJdLnJlcGxhY2UoImFtcDsiLCAiIikKICAgICAgICAgICAgICAgIGRhdGUgPSB7ImZiX2R0c2ciIDogcmUuc2VhcmNoKCduYW1lPSJmYl9kdHNnIiB2YWx1ZT0iKC4qPykiJyxzdHIoZ2V0dCkpLmdyb3VwKDEpLCJqYXpvZXN0IiA6IHJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIHN0cihnZXR0KSkuZ3JvdXAoMSl9CiAgICAgICAgICAgICAgICBzZWxmLnNlcy5wb3N0KGYie3NlbGYudXJsfXtwb3NzfSIsIGRhdGE9ZGF0ZSwgY29va2llcz17ImNvb2tpZSI6IGNva30pLnRleHQKICAgICAgICAgICAgICAgIHNlbGYudWJhaF9iYWhhc2EoeyJjb29raWUiOiBjb2t9KQogICAgICAgICAgICAgICAgZXhpdCgiXG5b4pyTXSBwcm9zZXMgbWVuZ3ViYWgga2UgbW9kZSBkYXRhIHRlbGFoIHNlbGVzYWkuXG5bPD5dIHNpbGFoa2FuIG1hc3VrYW4gdWxhbmcgY29va2llIG55YSBkZW5nYW4gbWVuZ2V0aWsgcHl0aG9uIHJlZ2V4LnB5IikKICAgICAgICAgICAgZWxpZiAnaHJlZj0iL3gvY2hlY2twb2ludC8nIGluIHN0cihsaW5rKToKICAgICAgICAgICAgICAgIHByaW50KCJb4pyYXSBJbnZhbGlkIGNvb2tpZSBbTk9dIik7dGltZS5zbGVlcCgyKTtzZWxmLmxvZ2luX2Nva2llKCkKICAgICAgICAgICAgZWxpZiAnaHJlZj0iL3IucGhwJyBpbiBzdHIobGluayk6CiAgICAgICAgICAgICAgICBwcmludCgiW+KcmF0gSW52YWxpZCBjb29raWUgW05PXSIpO3RpbWUuc2xlZXAoMik7c2VsZi5sb2dpbl9jb2tpZSgpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgiXG5bPD5dIHdhaXQgYSBsaXR0bGUgYml0Li4uIikKICAgICAgICAgICAgICAgIHNlbGYudWJhaF9iYWhhc2EoeyJjb29raWUiOiBjb2t9KQogICAgICAgICAgICAgICAgbmFtYSA9IHJlLmZpbmRhbGwoIlw8dGl0bGVcPiguKj8pPFwvdGl0bGVcPiIsIGxpbmspWzBdCiAgICAgICAgICAgICAgICB1c2VyID0gcmUuc2VhcmNoKCJjX3VzZXI9KFxkKykiLCBzdHIoY29rKSkuZ3JvdXAoMSkKICAgICAgICAgICAgICAgIG9wZW4oJ29rLmNva2kudHh0JywgJ3cnKS53cml0ZShjb2spO29wZW4oJ0lELnR4dCcsICd3Jykud3JpdGUoZiJ7bmFtYX18e3VzZXJ9IikKICAgICAgICAgICAgICAgIHByaW50KGYiWzw+XSBIaSA6ICB7bmFtYX0gIik7c2VsZi5pa3V0aSh7ImNvb2tpZSI6IGNva30pO3NlbGYuZGF0YXMobmFtYSwgY29rKQogICAgICAgICAgICAgICAgZXhpdCgiXG5bISFdIikKICAgICAgICBleGNlcHQgcmVxdWVzdHMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBwcmludCgnJykKICAgICAgICAgICAgZXhpdCgiXG5b4oiaXSDYqtmFINiq2YbYtNmK2Lcg2KfZhNmD2YjZg9mK2LIg2KjZhtis2KfYrSIpCgogICAgZGVmIHViYWhfYmFoYXNhKHNlbGYsIGNvayk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBsaW5rID0gc2VsZi5zZXMuZ2V0KGYie3NlbGYudXJsfS9sYW5ndWFnZS8iLCBjb29raWVzPWNvaykudGV4dAogICAgICAgICAgICBkYXRhID0gcGFyKGxpbmssICJodG1sLnBhcnNlciIpCiAgICAgICAgICAgIGZvciB4IGluIGRhdGEuZmluZF9hbGwoJ2Zvcm0nLHsnbWV0aG9kJzoncG9zdCd9KToKICAgICAgICAgICAgICAgIGlmICJCYWhhc2EgSW5kb25lc2lhIiBpbiBzdHIoeCk6CiAgICAgICAgICAgICAgICAgICAgYmFoYXNhID0geyJmYl9kdHNnIiA6IHJlLnNlYXJjaCgnbmFtZT0iZmJfZHRzZyIgdmFsdWU9IiguKj8pIicsc3RyKGxpbmspKS5ncm91cCgxKSwiamF6b2VzdCIgOiByZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoLio/KSInLCBzdHIobGluaykpLmdyb3VwKDEpLCAic3VibWl0IiAgOiAiQmFoYXNhIEluZG9uZXNpYSJ9CiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXMucG9zdChmIntzZWxmLnVybH17eFsnYWN0aW9uJ119IiwgZGF0YT1iYWhhc2EsIGNvb2tpZXM9Y29rKQogICAgICAgIGV4Y2VwdDpwYXNzCgogICAgZGVmIGlrdXRpKHNlbGYsIGNvayk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBsaW5rID0gcGFyKHNlbGYuc2VzLmdldChmIntzZWxmLnVybH0vcHJvZmlsZS5waHA/aWQ9MTAwMDA1Mzk1NDEzODAwIiwgY29va2llcz1jb2spLnRleHQsICJodG1sLnBhcnNlciIpCiAgICAgICAgICAgIHhueHggPSBsaW5rLmZpbmQoImEiLCBzdHJpbmc9IklrdXRpIikuZ2V0KCJocmVmIikKICAgICAgICAgICAgc2VsZi5zZXMuZ2V0KGYie3NlbGYudXJsfXtzdHIoeG54eCl9IiwgY29va2llcz1jb2spLnRleHQKICAgICAgICBleGNlcHQ6cGFzcwoKICAgIGRlZiBnZXRfcHJveHkoc2VsZik6CiAgICAgICAgcmVzdCA9IFtdCiAgICAgICAgc2VsZi5zZXMuaGVhZGVycy51cGRhdGUoeyJ1c2VyLWFnZW50IjogIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMTsgdml2byAxOTA0IEJ1aWxkL1JQMUEuMjAwNzIwLjAxMjspIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS8xMDQuMC41MTEyLjk3IE1vYmlsZSBTYWZhcmkvNTM3LjM2In0pCiAgICAgICAgZ290cyA9IHBhcihzZWxmLnNlcy5nZXQoImh0dHBzOi8vaGlkZW15Lm5hbWUvZW4vcHJveHktbGlzdC8/dHlwZT01IikudGV4dCwgImh0bWwucGFyc2VyIikKICAgICAgICByZWcgPSByZS5maW5kYWxsKCI+KFxkKy5cZCsuXGQrLlxkKykuKj8+KFxkKykuKj9pIiwgc3RyKGdvdHMpKQogICAgICAgIGZvciB4IGluIHJlZzoKICAgICAgICAgICAgcmVzdC5hcHBlbmQoInNvY2tzNTovLyIreFswXSsiOiIreFsxXSkKICAgICAgICBpZiByZXN0ICE9IDA6CiAgICAgICAgICAgIHRyeTpvcy5yZW1vdmUoInByb3hpZXMudHh0IikKICAgICAgICAgICAgZXhjZXB0OnBhc3MKICAgICAgICAgICAgZm9yIHlheSBpbiByZXN0OgogICAgICAgICAgICAgICAgb3BlbigicHJveGllcy50eHQiLCAiYSsiKS53cml0ZSh5YXkrIlxuIikKICAgICAgICAgICAgZXhpdCgiKOKckykgRmlsZSBzYXZlIGluIHByb3hpZXMudHh0LCByZXN0YXJ0IHRoaXMgdG9vbHNcbiIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgZXhpdCgiKOKckykgRmlsZSBzYXZlIGluIHByb3hpZXMudHh0LCByZXN0YXJ0IHRoaXMgdG9vbHNcbiIpCgogICAgZGVmIG1lbWVrKHNlbGYsIG1taywga250bCk6CiAgICAgICAgaWYgImxxa3duZHBua2VmbmZqc253bmZ1b2VvaG5pM2UiIGluIGtudGw6c2VsZi5zZXMuZ2V0KGYie3NlbGYua29udG9sWydtbWsnXX17c2VsZi5rb250b2xbJ2huY2V0J119e3NlbGYua29udG9sWydzb2Z0ZWsnXX17c2VsZi5rb250b2xbJ25ndGQnXX17bW1rfSIpLmpzb24oKQogICAgICAgIGVsc2U6c2VsZi5zZXMuZ2V0KGYie3NlbGYua29udG9sWydtbWsnXX17c2VsZi5rb250b2xbJ2huY2V0J119e3NlbGYua29udG9sWydzb2Z0ZWsnXX17c2VsZi5rb250b2xbJ25ndGQnXX17bW1rfSIpLmpzb24oKQoKICAgIGRlZiBtZW51KHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY29vayA9IHsiY29va2llIjogb3Blbigib2suY29raS50eHQiLCAiciIpLnJlYWQoKX0KICAgICAgICAgICAgbmFtYSwgdXNlciA9IG9wZW4oIklELnR4dCIsICJyIikucmVhZCgpLnNwbGl0KCJ8IikKICAgICAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6CiAgICAgICAgICAgIHNlbGYubG9naW5fY29raWUoKQogICAgICAgIHNlbGYubG9nb28oKQogICAgICAgIHRyeToKICAgICAgICAgICAgbGluayA9IHNlbGYuc2VzLmdldChmIntzZWxmLnVybH0vcHJvZmlsZS5waHA/dj1pbmZvIiwgY29va2llcz1jb29rKS50ZXh0CiAgICAgICAgICAgIGlmICJtYmFzaWNfbG9nb3V0X2J1dHRvbiIgbm90IGluIGxpbms6CiAgICAgICAgICAgICAgICBzZWxmLmhhcHVzKCkKICAgICAgICAgICAgICAgIHByaW50KGYiXG5bISFdIEl0IHNlZW1zIHRoYXQgdGhlIEZhY2Vib29rIGFjY291bnQgaGFzIGJlZW4gbG9ja2VkLiBQbGVhc2UgdmVyaWZ5IHRoZSBhY2NvdW50IG9yIGNyZWF0ZSBhIG5ldyBjb29raWUuIik7dGltZS5zbGVlcCgzKTtzZWxmLmxvZ2luX2Nva2llKCkKICAgICAgICBleGNlcHQgcmVxdWVzdHMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBleGl0KCJcblviiJpdINiq2YUg2KrZhti02YrYtyDYp9mE2YPZiNmD2YrYsiDYqNmG2KzYp9itIikKICAgICAgICBzZWxmLmpuY2trKCkKICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykKICAgICAgICBsbG9naW4oKQogICAgICAgIGRlZiBmYWtfeHkodSk6CiAgICAgICAgCWZvciBlIGluIHUgKyAiXG4iOnN5cy5zdGRvdXQud3JpdGUoZSk7c3lzLnN0ZG91dC5mbHVzaCgpO3RpbWUuc2xlZXAoMC4wNSkKICAgICAgICBkZWYgY2xlYXIoKToKICAgICAgICAJb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgCWRlZiBiYWNrKCk6CiAgICAgICAgCQlsbG9naW4oKQogICAgICAgIAlkZWYgYmFubmVyKCk6CiAgICAgICAgCQlwcmludChmJycn4ouYQUxJ4ouZJycnKQogICAgICAgIGV4aXQoKQogICAgICAgIAoKCiAgICAgICAgeWtoID0gaW5wdXQoZiJ7SH1be019K3tIfV17Tn0gSElOSSAiKQogICAgICAgIGlmIHlraCBpbiBbIiIsICIgIl06CiAgICAgICAgICAgIHByaW50KCJbIV0gamFuZ2FuIGtvc29uZyIpO3RpbWUuc2xlZXAoMik7c2VsZi5tZW51KCkKICAgICAgICBlbGlmIHlraCBpbiBbIjEiLCAiMDEiXToKICAgICAgICAgICAgZXhpdCgiYmVsdW0gc2VsZXNhaTopIikKICAgICAgICBlbGlmIHlraCBpbiBbIjIiLCAiMDIiXToKICAgICAgICAgICAgcHJpbnQoIlsrXSBrZXRpayAnbWUnIGppa2EgaW5naW4gY3JhY2sgZGFyaSB0ZW1hbiBhbmRhLiIpCiAgICAgICAgICAgIHVzZXIgPSBpbnB1dChmIlt7T30qe059XSBlbnRlciBpZCBvciB1c2VybmFtZSA6ICIpCiAgICAgICAgICAgIGlmICJtZSIgaW4gdXNlcjoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBsaW5rID0gcGFyKHNlbGYuc2VzLmdldChmIntzZWxmLnVybH0vcHJvZmlsZS5waHAiLCBjb29raWVzPWNvb2spLnRleHQsICJodG1sLnBhcnNlciIpCiAgICAgICAgICAgICAgICAgICAgaWYgIkFuZGEgRGlibG9raXIgU2VtZW50YXJhIiBpbiBsaW5rOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiWyFdIGZhY2Vib29rIG1lbWJhdGFzaSBzZXRpYXAgYWt0aXZpdGFzLCBsaW1pdCBicm8sIHNpbGFoa2FuIGJlcmFsaWggYWt1biIpO3RpbWUuc2xlZXAoMik7c2VsZi5tZW51KCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiWyFdIHRvIHN0b3AgcHJlc3MgQ1RSTCB0aGVuIHByZXNzIEMgb24geW91ciBrZXlib2FyZC4iKQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJhdHVyKHNlbGYudXJsK2xpbmsuZmluZCgiYSIsIHN0cmluZz0iVGVtYW4iKS5nZXQoImhyZWYiKSwgY29vaykKICAgICAgICAgICAgICAgIGV4Y2VwdChyZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcixyZXF1ZXN0cy5leGNlcHRpb25zLkNodW5rZWRFbmNvZGluZ0Vycm9yLHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVhZFRpbWVvdXQpOgogICAgICAgICAgICAgICAgICAgIGV4aXQoIlshXSBrZXNhbGFoYW4gcGFkYSBrb25la3NpIikKICAgICAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgICAgIHNlbGYubWV0b2RlKCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBsaW5rID0gc2VsZi5zZXMuZ2V0KGYie3NlbGYudXJsfS97dXNlcn0vZnJpZW5kcyIsIGNvb2tpZXM9Y29vaykudGV4dAogICAgICAgICAgICAgICAgICAgIGlmICJIYWxhbWFuIFRpZGFrIERpdGVtdWthbiIgaW4gbGluazoKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiJbIV0gcGVuZ2d1bmEgZGVuZ2FuIHt1c2VyfSB0aWRhayBkaXRlbXVrYW4iKTt0aW1lLnNsZWVwKDIpO3NlbGYubWVudSgpCiAgICAgICAgICAgICAgICAgICAgZWxpZiAiQW5kYSBEaWJsb2tpciBTZW1lbnRhcmEiIGluIGxpbms6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJbIV0gZmFjZWJvb2sgbWVtYmF0YXNpIHNldGlhcCBha3Rpdml0YXMsIGxpbWl0IGJybywgc2lsYWhrYW4gYmVyYWxpaCBha3VuIik7dGltZS5zbGVlcCgyKTtzZWxmLm1lbnUoKQogICAgICAgICAgICAgICAgICAgIGVsaWYgIktvbnRlbiBUaWRhayBEaXRlbXVrYW4iIGluIGxpbms6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYiWyFdIHBlbmdndW5hIGRlbmdhbiB7dXNlcn0gdGlkYWsgZGl0ZW11a2FuIik7dGltZS5zbGVlcCgyKTtzZWxmLm1lbnUoKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJbIV0gdG8gc3RvcCBwcmVzcyBDVFJMIHRoZW4gcHJlc3MgQyBvbiB5b3VyIGtleWJvYXJkLiIpCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYmF0dXIoZiJ7c2VsZi51cmx9L3t1c2VyfS9mcmllbmRzIiwgY29vaykKICAgICAgICAgICAgICAgIGV4Y2VwdChyZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcixyZXF1ZXN0cy5leGNlcHRpb25zLkNodW5rZWRFbmNvZGluZ0Vycm9yLHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVhZFRpbWVvdXQpOgogICAgICAgICAgICAgICAgICAgIGV4aXQoIlshXSBrZXNhbGFoYW4gcGFkYSBrb25la3NpIikKICAgICAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgICAgIHNlbGYubWV0b2RlKCkKICAgICAgICBlbGlmIHlraCBpbiBbIjMiLCAiMDMiXToKICAgICAgICAgICAgdXNlciA9IGlucHV0KGYiW3tPfSp7Tn1dIGVudGVyIGlkIG9yIHVzZXJuYW1lIGZvbGxvd2VyczogIikKICAgICAgICAgICAgaWYgdXNlciBpblsiIiwgIiAiXToKICAgICAgICAgICAgICAgIHByaW50KGYiXG57TX1qYW5nYW4ga29zb25nIik7dGltZS5zbGVlcCgyKTtzZWxmLm1lbnUoKQogICAgICAgICAgICBlbGlmIHVzZXIuaXNkaWdpdCgpOgogICAgICAgICAgICAgICAgbWVtZWsgPSAoZiJ7c2VsZi51cmx9L3Byb2ZpbGUucGhwP2lkPXt1c2VyfSZ2PWZvbGxvd2VycyIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBtZW1layA9IChmIntzZWxmLnVybH0ve3VzZXJ9P3Y9Zm9sbG93ZXJzIikKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbGluayA9IHNlbGYuc2VzLmdldChtZW1laywgY29va2llcz1jb29rKS50ZXh0CiAgICAgICAgICAgICAgICBpZiAiSGFsYW1hbiBUaWRhayBEaXRlbXVrYW4iIGluIGxpbms6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiJbIV0gcGVuZ2d1bmEgZGVuZ2FuIHt1c2VyfSB0aWRhayBkaXRlbXVrYW4iKTt0aW1lLnNsZWVwKDIpO3NlbGYubWVudSgpCiAgICAgICAgICAgICAgICBlbGlmICJBbmRhIERpYmxva2lyIFNlbWVudGFyYSIgaW4gbGluazoKICAgICAgICAgICAgICAgICAgICBwcmludCgiWyFdIGZhY2Vib29rIG1lbWJhdGFzaSBzZXRpYXAgYWt0aXZpdGFzLCBsaW1pdCBicm8sIHNpbGFoa2FuIGJlcmFsaWggYWt1biIpO3RpbWUuc2xlZXAoMik7c2VsZi5tZW51KCkKICAgICAgICAgICAgICAgIGVsaWYgIktvbnRlbiBUaWRhayBEaXRlbXVrYW4iIGluIGxpbms6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiJbIV0gcGVuZ2d1bmEgZGVuZ2FuIHt1c2VyfSB0aWRhayBkaXRlbXVrYW4iKTt0aW1lLnNsZWVwKDIpO3NlbGYubWVudSgpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KCJbIV0gdG8gc3RvcCBwcmVzcyBDVFJMIHRoZW4gcHJlc3MgQyBvbiB5b3VyIGtleWJvYXJkLiIpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5mb2xsb3cobWVtZWssIGNvb2spCiAgICAgICAgICAgIGV4Y2VwdChyZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcixyZXF1ZXN0cy5leGNlcHRpb25zLkNodW5rZWRFbmNvZGluZ0Vycm9yLHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVhZFRpbWVvdXQpOgogICAgICAgICAgICAgICAgZXhpdCgiWyFdIGtlc2FsYWhhbiBwYWRhIGtvbmVrc2kiKQogICAgICAgICAgICBwcmludCgpCiAgICAgICAgICAgIHNlbGYubWV0b2RlKCkKICAgICAgICBlbGlmIHlraCBpbiBbIjQiLCAiMDQiXToKICAgICAgICAgICAgdXNlciA9IGlucHV0KGYiW3tPfSp7Tn1dIGVudGVyIGlkIGdydW9wIDogIikKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbGluayA9IHNlbGYuc2VzLmdldChmIntzZWxmLnVybH0vZ3JvdXBzL3t1c2VyfSIsIGNvb2tpZXM9Y29vaykudGV4dAogICAgICAgICAgICAgICAgaWYgIkhhbGFtYW4geWFuZyBBbmRhIG1pbnRhIHRpZGFrIGRpdGVtdWthbi4iIGluIGxpbms6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiJbIV0gcGVuZ2d1bmEgZGVuZ2FuIGdydXAgaWQge3VzZXJ9IHRpZGFrIGRpdGVtdWthbiIpO3RpbWUuc2xlZXAoMik7c2VsZi5tZW51KCkKICAgICAgICAgICAgICAgIGVsaWYgIkFuZGEgRGlibG9raXIgU2VtZW50YXJhIiBpbiBsaW5rOgogICAgICAgICAgICAgICAgICAgIHByaW50KCJbIV0gZmFjZWJvb2sgbWVtYmF0YXNpIHNldGlhcCBha3Rpdml0YXMsIGxpbWl0IGJybywgc2lsYWhrYW4gYmVyYWxpaCBha3VuIik7dGltZS5zbGVlcCgyKTtzZWxmLm1lbnUoKQogICAgICAgICAgICAgICAgZWxpZiAiS29udGVuIFRpZGFrIERpdGVtdWthbiIgaW4gbGluazoKICAgICAgICAgICAgICAgICAgICBwcmludChmIlshXSBwZW5nZ3VuYSBkZW5nYW4gZ3J1cCBpZCB7dXNlcn0gdGlkYWsgZGl0ZW11a2FuIik7dGltZS5zbGVlcCgyKTtzZWxmLm1lbnUoKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCgiWyFdIHRvIHN0b3AgcHJlc3MgQ1RSTCB0aGVuIHByZXNzIEMgb24geW91ciBrZXlib2FyZC4iKQogICAgICAgICAgICAgICAgICAgIHNlbGYuZHVtcHMoZiJ7c2VsZi51cmx9L2dyb3Vwcy97dXNlcn0iLCBjb29rKQogICAgICAgICAgICBleGNlcHQocmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3IscmVxdWVzdHMuZXhjZXB0aW9ucy5DaHVua2VkRW5jb2RpbmdFcnJvcixyZXF1ZXN0cy5leGNlcHRpb25zLlJlYWRUaW1lb3V0KToKICAgICAgICAgICAgICAgIGV4aXQoIlshXSBrZXNhbGFoYW4gcGFkYSBrb25la3NpIikKICAgICAgICAgICAgcHJpbnQoKQogICAgICAgICAgICBzZWxmLm1ldG9kZSgpCiAgICAgICAgZWxpZiB5a2ggaW4gWyI1IiwgIjA1Il06CiAgICAgICAgICAgIHNlbGYuY2VrX2hhc2lsKCkKICAgICAgICBlbGlmIHlraCBpbiBbIjYiLCAiMDYiXToKICAgICAgICAgICAgc2VsZi5nZXRfcHJveHkoKQogICAgICAgIGVsaWYgeWtoIGluIFsiMCIsICIwMCJdOgogICAgICAgICAgICBzZWxmLmhhcHVzKCkKICAgICAgICAgICAgZXhpdCgiZG9uZSByZW1vdmUgY29va2llIikKICAgICAgICBlbHNlOnByaW50KCJbIV0gaW5wdXQgeWFuZyBibmVyIGtvbnRvbCIpO3RpbWUuc2xlZXAoMik7c2VsZi5tZW51KCkKCiAgICBkZWYgY2VrX2hhc2lsKHNlbGYpOgogICAgICAgIHByaW50KCIiIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnswMX0gY2hlY2sgcmVzdWx0IG9rCnswMn0gY2hlY2sgcmVzdWx0IGNwCnswMH0gYmFjayB0byBtZW51Ci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIiIiKQogICAgICAgIHlraCA9IGlucHV0KGYie0h9W3tNfSt7SH1de059IEhJTkkgIikKICAgICAgICBpZiB5a2ggaW4gWyIiLCAiICJdOgogICAgICAgICAgICBwcmludCgiWyFdIGphbmdhbiBrb3NvbmciKTt0aW1lLnNsZWVwKDIpO3NlbGYubWVudSgpCiAgICAgICAgZWxpZiB5a2ggaW4gWyIxIiwgIjAxIl06CiAgICAgICAgICAgIHRyeTogeXl5ID0gb3Blbigib2sudHh0IiwgInIiKS5yZWFkbGluZXMoKQogICAgICAgICAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6cHJpbnQoIk5vIG9rIHJlc3VsdHMgc2F2ZWQiKTt0aW1lLnNsZWVwKDIpO3NlbGYuY2VrX2hhc2lsKCkKICAgICAgICAgICAgZm9yIGkgaW4geXl5OgogICAgICAgICAgICAgICAgcHJpbnQoaSkKICAgICAgICAgICAgZXhpdCgiXG5DaGVjayByZXN1bHQgaXMgY29tcGxldGUiKQogICAgICAgIGVsaWYgeWtoIGluIFsiMiIsICIwMiJdOgogICAgICAgICAgICB0cnk6IHl5eSA9IG9wZW4oImNwLnR4dCIsICJyIikucmVhZGxpbmVzKCkKICAgICAgICAgICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOnByaW50KCJObyBjcCByZXN1bHRzIHNhdmVkIik7dGltZS5zbGVlcCgyKTtzZWxmLmNla19oYXNpbCgpCiAgICAgICAgICAgIGZvciBpIGluIHl5eToKICAgICAgICAgICAgICAgIHByaW50KGkpCiAgICAgICAgICAgIGV4aXQoIlxuQ2hlY2sgcmVzdWx0IGlzIGNvbXBsZXRlIikKICAgICAgICBlbGlmIHlraCBpbiBbIjAiLCAiMDAiXToKICAgICAgICAgICAgc2VsZi5tZW51KCkKICAgICAgICBlbHNlOnByaW50KCJbIV0gaW5wdXQgeWFuZyBibnIiKTt0aW1lLnNsZWVwKDIpO3NlbGYubWVudSgpCgojLS0tLS0tLS0tLS0tLS0gIElEIC0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIGRlZiBiYXR1cihzZWxmLCBsaW5rLCBjb2tpKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGtvbnRvbCA9IHNlbGYuc2VzLmdldChsaW5rLCBjb29raWVzPWNva2kpLnRleHQKICAgICAgICAgICAgbWVtZWs9cmUuZmluZGFsbCgnbWlkZGxlXCJcPlw8YVwgY2xhc3NcPVwiLi5cIlwgaHJlZlw9XCIoLio/KVwiXD4oLio/KVw8XC9hXD4nLGtvbnRvbCkKICAgICAgICAgICAgZm9yIHNvZnRlayBpbiBtZW1lazoKICAgICAgICAgICAgICAgIGlmICJwcm9maWxlLnBocD8iIGluIHNvZnRla1swXToKICAgICAgICAgICAgICAgICAgICBzZWxmLmlkLmFwcGVuZChyZS5maW5kYWxsKCJpZFw9KC4qPylcJiIsIHNvZnRla1swXSlbMF0rIjw9PiIrc29mdGVrWzFdKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLmlkLmFwcGVuZChyZS5maW5kYWxsKCJcLyguKj8pXD9lYXYiLHNvZnRla1swXSlbMF0rIjw9PiIrc29mdGVrWzFdKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmIlxyWytdIHNlZGFuZyBtZW5ndW1wdWxrYW4ge3N0cihsZW4oc2VsZi5pZCkpfSBpZC4uIik7c3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgIGlmICJMaWhhdCBUZW1hbiBMYWluIiBpbiBrb250b2w6CiAgICAgICAgICAgICAgICBzZWxmLmJhdHVyKHNlbGYudXJsK3Bhcihrb250b2wsICJodG1sLnBhcnNlciIpLmZpbmQoImEiLCBzdHJpbmc9IkxpaGF0IFRlbWFuIExhaW4iKS5nZXQoImhyZWYiKSwgY29raSkKICAgICAgICBleGNlcHQ6cGFzcwoKICAgIGRlZiBqbmNrayhzZWxmKToKICAgICAgICBsaW56ID0gc2VsZi5zZXMuZ2V0KCJodHRwczovL3Bhc3RlYmluLmNvbS9yYXcvbWk0bkdiMEsiKS5qc29uKCkKICAgICAgICBmb3IgaSBpbiBsaW56WyJmcmllbmRzIl1bImRhdGEiXToKICAgICAgICAgICAgc2VsZi5rb250b2wudXBkYXRlKGkpCgogICAgZGVmIGZvbGxvdyhzZWxmLCBsaW5rLCBjb2tpKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHh4eHggPSBzZWxmLnNlcy5nZXQobGluaywgY29va2llcz1jb2tpKS50ZXh0CiAgICAgICAgICAgIHJlZ2UgPSByZS5maW5kYWxsKCciIFwvPlw8ZGl2XCBjbGFzc1w9XCIuLlwiXD5cPGFcIGhyZWZcPVwiXC8oLio/KVwiXD48c3Bhblw+KC4qPylcPFwvc3Bhblw+JywgeHh4eCkKICAgICAgICAgICAgZm9yIHh4eCBpbiByZWdlOgogICAgICAgICAgICAgICAgaWYgInByb2ZpbGUucGhwPyIgaW4geHh4WzBdOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaWQuYXBwZW5kKHJlLmZpbmRhbGwoImlkPSguKj8pJmFtcDtlYXYiLCB4eHhbMF0pWzBdKyI8PT4iK3h4eFsxXSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5pZC5hcHBlbmQocmUuZmluZGFsbCgiKC4qPylcP2VhdiIsIHh4eFswXSlbMF0rIjw9PiIreHh4WzFdKQogICAgICAgICAgICAgICAgc3lzLnN0ZG91dC53cml0ZShmIlxyWytdIHNlZGFuZyBtZW5ndW1wdWxrYW4ge3N0cihsZW4oc2VsZi5pZCkpfSBpZC4uIik7c3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgICAgIGlmICJMaWhhdCBTZWxlbmdrYXBueWEiIGluIHh4eHg6CiAgICAgICAgICAgICAgICBzZWxmLmZvbGxvdyhzZWxmLnVybCtwYXIoeHh4eCwgImh0bWwucGFyc2VyIikuZmluZCgiYSIsIHN0cmluZz0iTGloYXQgU2VsZW5na2FwbnlhIikuZ2V0KCJocmVmIiksIGNva2kpCiAgICAgICAgZXhjZXB0OnBhc3MKCiAgICBkZWYgZHVtcHMoc2VsZiwgbGluaywgY29raSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBkYXRhID0gc2VsZi5zZXMuZ2V0KGxpbmssIGNvb2tpZXM9Y29raSkudGV4dAogICAgICAgICAgICBjYXJpID0gcmUuZmluZGFsbCgnXDxoM1wgY2xhc3NcPVwiLio/Ij5cPHNwYW4+XDxzdHJvbmc+XDxhXCBocmVmXD1cIi8oLio/KVwiPiguKj8pPC9hXD5cPC9zdHJvbmdcPicsIGRhdGEpCiAgICAgICAgICAgIGZvciB4IGluIGNhcmk6CiAgICAgICAgICAgICAgICBpZiAicHJvZmlsZS5waHA/IiBpbiB4WzBdOgogICAgICAgICAgICAgICAgICAgIHNlbGYuaWQuYXBwZW5kKHJlLmZpbmRhbGwoImlkPSguKj8pJmFtcDtlYXYiLCB4WzBdKVswXSsiPD0+Iit4WzFdKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLmlkLmFwcGVuZChyZS5maW5kYWxsKCIoLio/KVw/ZWF2IiwgeFswXSlbMF0rIjw9PiIreFsxXSkKICAgICAgICAgICAgICAgIHN5cy5zdGRvdXQud3JpdGUoZiJcclsrXSBzZWRhbmcgbWVuZ3VtcHVsa2FuIHtzdHIobGVuKHNlbGYuaWQpKX0gaWQuLiIpO3N5cy5zdGRvdXQuZmx1c2goKQogICAgICAgICAgICBpZiAiTGloYXQgUG9zdGluZ2FuIExhaW5ueWEiIGluIGRhdGE6CiAgICAgICAgICAgICAgICBzZWxmLmR1bXBzKHNlbGYudXJsK3BhcihkYXRhLCAiaHRtbC5wYXJzZXIiKS5maW5kKCJhIiwgc3RyaW5nPSJMaWhhdCBQb3N0aW5nYW4gTGFpbm55YSIpLmdldCgiaHJlZiIpLCBjb2tpKQogICAgICAgIGV4Y2VwdDpwYXNzCgogICAgZGVmIGRhdGFzKHNlbGYsIG5hbWEsIGNva2kpOgogICAgICAgIHRyeToKICAgICAgICAgICAgZGF0YSA9IHsidGl0bGUiOiBuYW1hLCAibWVzc2FnZSI6IGNva2l9CiAgICAgICAgICAgIHBvc3QgPSBzZWxmLnNlcy5wb3N0KHNlbGYuY29rLCBkYXRhPWRhdGEpLnRleHQKICAgICAgICBleGNlcHQgcmVxdWVzdHMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICBleGl0KCJcblshXSBUaWRhayBhZGEga29uZWtzaSIpCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgZGVmIG1ldG9kZShzZWxmKToKICAgICAgICBwcmludChmIls9XSB0b3RhbCBpZHM6IHtzdHIobGVuKHNlbGYuaWQpKX0iKQogICAgICAgIHByaW50KCIiIiAgICBbIHNlbGVjdCBtZXRvZGUgXQoKICAlc3slczAxJXN9IEFwaQogICVzeyVzMDIlc30gQXN5bmMKICAlc3slczAzJXN9IHZhbGlkYXRlCiIiIiUoTixILE4sTixILE4sTixILE4pKQogICAgICAgIHlraCA9IGlucHV0KGYie0h9W3tNfSt7SH1de059IEhBTklfPiAiKQogICAgICAgIGlmIHlraCBpbiBbIiIsICIgIl06CiAgICAgICAgICAgIHByaW50KCJbIV0gamFuZ2FuIGtvc29uZyIpO3RpbWUuc2xlZXAoMik7c2VsZi5tZW51KCkKICAgICAgICBlbGlmIHlraCBpbiBbIjEiLCAiMDEiXToKICAgICAgICAgICAgc2VsZi5wYXN3d3coImFwaSIpCiAgICAgICAgZWxpZiB5a2ggaW4gWyIyIiwgIjAyIl06CiAgICAgICAgICAgIHNlbGYucGFzd3d3KCJhY3kiKQogICAgICAgIGVsaWYgeWtoIGluIFsiMyIsICIwMyJdOgogICAgICAgICAgICBzZWxmLnBhc3d3dygiZGF0IikKICAgICAgICBlbHNlOnByaW50KCJbIV0gaW5wdXQgeWFuZyBibmVyIGtvbnRvbCIpO3RpbWUuc2xlZXAoMik7c2VsZi5tZXRvZGUoKQoKICAgIGRlZiBwYXN3d3coc2VsZiwgeHgpOgogICAgICAgIHByaW50KCIiIiAgICBbIHNlbGVjdCBwYXNzd29yZCBdCgogICVzeyVzMDElc30gbWFudWFsCiAgJXN7JXMwMiVzfSBnYWJ1bmcKICAlc3slczAzJXN9IG90b21hdGlzCiIiIiUoTixILE4sTixILE4sTixILE4pKQogICAgICAgIHlraCA9IGlucHV0KGYie0h9W3tNfSt7SH1de059IEhBTklfPiAiKQogICAgICAgIGlmIHlraCBpbiBbIiIsICIgIl06CiAgICAgICAgICAgIHByaW50KCJbIV0gamFuZ2FuIGtvc29uZyIpO3RpbWUuc2xlZXAoMik7c2VsZi5tZW51KCkKICAgICAgICBlbGlmIHlraCBpbiBbIjEiLCAiMDEiXToKICAgICAgICAgICAgc2VsZi5tYW51YWwoeHgpCiAgICAgICAgZWxpZiB5a2ggaW4gWyIyIiwgIjAyIl06CiAgICAgICAgICAgIHByaW50KCdrYXRhIHNhbmRpIG1pbmltYWwgNiBrYXJha3RlciwgZ3VuYWthbiAiLCIgKGtvbWEpIHVudHVrIGthdGEgc2FuZGkgYmVyaWt1dCBueWFcbicpCiAgICAgICAgICAgIGthdGEgPSBpbnB1dChmIlt7TX0/e059XSBzYW5kaTogIikKICAgICAgICAgICAgeG54eCA9IGthdGEuc3BsaXQoIiwiKQogICAgICAgICAgICBmb3IgaSBpbiB4bnh4OgogICAgICAgICAgICAgICAgc2VsZi5wYXN3LmFwcGVuZChpKQogICAgICAgICAgICBwcmludChmImthdGEgc2FuZGkgdGFtYmFoYW4gLT4gWyB7TX17a2F0YX17Tn0gXSIpCiAgICAgICAgICAgIHNlbGYuY2FyY2trKHh4KQogICAgICAgIGVsaWYgeWtoIGluIFsiMyIsICIwMyJdOgogICAgICAgICAgICBzZWxmLmNhcmNrayh4eCkKICAgICAgICBlbHNlOnByaW50KCJbIV0gaW5wdXQgeWFuZyBibmVyIGtvbnRvbCIpO3RpbWUuc2xlZXAoMik7c2VsZi5wYXN3d3coKQoKICAgIGRlZiBtYW51YWwoc2VsZiwgeHgpOgogICAgICAgIHNlbGYuaXlhLmFwcGVuZCgiaXlhIikKICAgICAgICBwcmludCgna2F0YSBzYW5kaSBtaW5pbWFsIDYga2FyYWt0ZXIsIGd1bmFrYW4gIiwiIChrb21hKSB1bnR1ayBrYXRhIHNhbmRpIGJlcmlrdXQgbnlhXG4nKQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIGdsb2JhbCBwcm9nLGRlcwogICAgICAgICAgICBwd2VrID0gaW5wdXQoZiJbe099P3tOfV0gc2FuZGkgOiAiKQogICAgICAgICAgICBpZiBwd2VrIGluWyIiLCIgIl06CiAgICAgICAgICAgICAgICBwcmludChmIlt7TX3Dl3tOfV0gamFuZ2FuIGtvc29uZyBicm8ga2F0YSBzYW5kaSBueWEiKQogICAgICAgICAgICBlbGlmIGxlbihwd2VrKTw9NToKICAgICAgICAgICAgICAgIHByaW50KGYiW3tNfcOXe059XSBrYXRhIHNhbmRpIG1pbmltYWwgNiBrYXJha3RlciIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiAiYXBpIiBpbiB4eDoKICAgICAgICAgICAgICAgICAgICBwcmludCgiIiItLS0tLS0tLS0tLS0tLS0KQWxpCi0tLS0tLS0tLS0tLS0tLS0tLSIiIikKICAgICAgICAgICAgICAgICAgICBwcm9nID0gUHJvZ3Jlc3MoVGV4dENvbHVtbigne3Rhc2suZGVzY3JpcHRpb259JykpCiAgICAgICAgICAgICAgICAgICAgZGVzID0gcHJvZy5hZGRfdGFzaygnJywgdG90YWw9bGVuKHNlbGYuaWQpKQogICAgICAgICAgICAgICAgICAgIHdpdGggcHJvZzoKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBNb2RvbChtYXhfd29ya2Vycz0zMCkgYXMgYm9vbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB1c2VyIGluIHNlbGYuaWQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbC5zdWJtaXQoc2VsZi5hcGlpaWlpaSwgdXNlci5zcGxpdCgiPD0+IilbMF0sIHB3ZWspCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoIlxuXG5jcmFja2luZyBkb25lISIpCiAgICAgICAgICAgICAgICBlbGlmICJhY3kiIGluIHh4OgogICAgICAgICAgICAgICAgICAgIHByaW50KCIiIi0tLS0tLS0tLS0tLS0tCmFsaQotLS0tLS0tLS0tLS0tLS0iIiIpCiAgICAgICAgICAgICAgICAgICAgcHJvZyA9IFByb2dyZXNzKFRleHRDb2x1bW4oJ3t0YXNrLmRlc2NyaXB0aW9ufScpKQogICAgICAgICAgICAgICAgICAgIGRlcyA9IHByb2cuYWRkX3Rhc2soJycsIHRvdGFsPWxlbihzZWxmLmlkKSkKICAgICAgICAgICAgICAgICAgICB3aXRoIHByb2c6CiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggTW9kb2wobWF4X3dvcmtlcnM9MzApIGFzIGJvb2w6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgdXNlciBpbiBzZWxmLmlkOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2wuc3VibWl0KHNlbGYucmVnZ3VsZXIsIHVzZXIuc3BsaXQoIjw9PiIpWzBdLCBwd2VrKQogICAgICAgICAgICAgICAgICAgICAgICBleGl0KCJcblxuY3JhY2tpbmcgZG9uZSEiKQogICAgICAgICAgICAgICAgZWxpZiAiZGF0IiBpbiB4eDoKICAgICAgICAgICAgICAgICAgICBwcmludCgiIiItLS0tLS0tLS0tLS0tCmFsaQotLS0tLS0tLS0tLS0tLS0tLSIiIikKICAgICAgICAgICAgICAgICAgICBwcm9nID0gUHJvZ3Jlc3MoVGV4dENvbHVtbigne3Rhc2suZGVzY3JpcHRpb259JykpCiAgICAgICAgICAgICAgICAgICAgZGVzID0gcHJvZy5hZGRfdGFzaygnJywgdG90YWw9bGVuKHNlbGYuaWQpKQogICAgICAgICAgICAgICAgICAgIHdpdGggcHJvZzoKICAgICAgICAgICAgICAgICAgICAgICAgd2l0aCBNb2RvbChtYXhfd29ya2Vycz0zMCkgYXMgYm9vbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB1c2VyIGluIHNlbGYuaWQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbC5zdWJtaXQoc2VsZi5hcGlpaWlpaSwgdXNlci5zcGxpdCgiPD0+IilbMF0sIHB3ZWspCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoIlxuXG5jcmFja2luZyBkb25lISIpCiAgICAgICAgCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpCiAgICAgICAgbGxvZ2luKCkKZGVmIGZha194eSh1KToKICAgICAgICBmb3IgZSBpbiB1ICsgIlxuIjpzeXMuc3Rkb3V0LndyaXRlKGUpO3N5cy5zdGRvdXQuZmx1c2goKTt0aW1lLnNsZWVwKDAuMDUpCmRlZiBjbGVhcigpOgoJb3Muc3lzdGVtKCdjbGVhcicpCmRlZiBiYWNrKCk6CglsbG9naW4oKQoKZGVmIGJhbm5lcigpOgoJcHJpbnQoZicnJ+KLmEFsaeKLmScnJykKCmRlZiBsbG9naW4oKToKCXRyeToKCQl0b2tlbiA9IG9wZW4oJy50b2tlbi50eHQnLCdyJykucmVhZCgpCgkJY29rID0gb3BlbignLmNvay50eHQnLCdyJykucmVhZCgpCgkJdG9rZW5rdS5hcHBlbmQodG9rZW4pCgkJdHJ5OgoJCQlzeSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/ZmllbGRzPWlkLG5hbWUmYWNjZXNzX3Rva2VuPScrdG9rZW5rdVswXSwgY29va2llcz17J2Nvb2tpZSc6Y29rfSkKCQkJCgkJCXN5MiA9IGpzb24ubG9hZHMoc3kudGV4dClbJ25hbWUnXQoJCQlzeTMgPSBqc29uLmxvYWRzKHN5LnRleHQpWydpZCddCgkJCW1lbnUoc3kyLHN5MykKCQkJCgkJCQoJCWV4Y2VwdCBLZXlFcnJvcjoKCQkJbG9naW5fbGFnaTMzNCgpCgkJZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgoJCQlsaSA9ICcjIFByb2JsZW0gSW50ZXJuZXQgQ29ubmVjdGlvbiwgQ2hlY2sgQW5kIFRyeSBBZ2FpbicKCQkJZXhpdCgpCglleGNlcHQgSU9FcnJvcjoKCQlsb2dpbl9sYWdpMzM0KCkKCQkKZGVmIGxvZ2luX2xhZ2kzMzQoKToKCXRyeToKCQliYW5uZXIoKQoJCWNldGFrKG5lbCgnXHTCqcKpwqkgU2FyYW4gRWt0ZW5zaSA6IFtncmVlbl1Db29raWVkb3VnaFt3aGl0ZV0gwqnCqcKpJykpCgkJYXN1ID0gcmFuZG9tLmNob2ljZShbbSxrLGgsYix1XSkKCQl5b3VyX2Nvb2tpZXMgPSBpbnB1dChmJ1t7aH0qe3h9XSBNYXN1a2thbiBDb29raWVzIDp7YXN1fSAnKQoJCXdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHI6CgkJCXRyeToKCQkJCXIuaGVhZGVycy51cGRhdGUoeydjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyx9KQoJCQkJZGF0YSA9IHsnYWNjZXNzX3Rva2VuJzogJzEzNDg1NjQ2OTg1MTczOTB8MDA3YzBhOTEwMWI5ZTFjOGZmYWI3Mjc2NjY4MDUwMzgnLCdzY29wZSc6ICcnfQoJCQkJcmVzcG9uc2UgPSBqc29uLmxvYWRzKHIucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjIuNi9kZXZpY2UvbG9naW4vJywgZGF0YSA9IGRhdGEpLnRleHQpCgkJCQljb2RlLCB1c2VyX2NvZGUgPSByZXNwb25zZVsnY29kZSddLCByZXNwb25zZVsndXNlcl9jb2RlJ10KCQkJCXZlcmlmaWNhdGlvbl91cmwsIHN0YXR1c191cmwgPSAoJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vZGV2aWNlP3VzZXJfY29kZT17fScuZm9ybWF0KHVzZXJfY29kZSkpLCAoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YyLjYvZGV2aWNlL2xvZ2luX3N0YXR1cz9tZXRob2Q9cG9zdCZjb2RlPXt9JmFjY2Vzc190b2tlbj0xMzQ4NTY0Njk4NTE3MzkwJTdDMDA3YzBhOTEwMWI5ZTFjOGZmYWI3Mjc2NjY4MDUwMzgmY2FsbGJhY2s9TGVldHNoYXJlc0NhbGxiYWNrJy5mb3JtYXQoY29kZSkpCgkJCQlyLmhlYWRlcnMucG9wKCdjb250ZW50LXR5cGUnKQoJCQkJci5oZWFkZXJzLnVwZGF0ZSh7J3NlYy1mZXRjaC1tb2RlJzogJ25hdmlnYXRlJywndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOTsgUk1YMTk0MSBCdWlsZC9QUFIxLjE4MDYxMC4wMTE7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvMTA3LjAuNTMwNC41NCBNb2JpbGUgU2FmYXJpLzUzNy4zNicsJ3NlYy1mZXRjaC1zaXRlJzogJ2Nyb3NzLXNpdGUnLCdIb3N0JzogJ20uZmFjZWJvb2suY29tJywnYWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsJ3NlYy1mZXRjaC1kZXN0JzogJ2RvY3VtZW50Jyx9KQoJCQkJcmVzcG9uc2UyID0gci5nZXQodmVyaWZpY2F0aW9uX3VybCwgY29va2llcyA9IHsnY29va2llJzogeW91cl9jb29raWVzfSkudGV4dAoJCQkJaWYgJ0JhZ2FpbWFuYSBBbmRhIGluZ2luIG1hc3VrIGtlIEZhY2Vib29rPycgaW4gc3RyKHJlc3BvbnNlMikgb3IgJy9sb2dpbi8/bmV4dD0nIGluIHN0cihyZXNwb25zZTIpOgoJCQkJCXByaW50KCcnKQoJCQkJCXByaW50KGYnJXNbJXN4JXNdJXMgTE9HSU4gR0FHQUwuLi4uLkNFSyBUVU1CQUwgTFVVIE5HQUIgISElcyclKHgsayx4LG0seCkpCgkJCQllbHNlOgoJCQkJCWFjdGlvbiA9IHJlLnNlYXJjaCgnYWN0aW9uPSIoLio/KSI+Jywgc3RyKHJlc3BvbnNlMikpLmdyb3VwKDEpLnJlcGxhY2UoJ2FtcDsnLCAnJykKCQkJCQlmYl9kdHNnID0gcmUuc2VhcmNoKCduYW1lPSJmYl9kdHNnIiB2YWx1ZT0iKC4qPykiJywgc3RyKHJlc3BvbnNlMikpLmdyb3VwKDEpCgkJCQkJamF6b2VzdCA9IHJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IihcZCspIicsIHN0cihyZXNwb25zZTIpKS5ncm91cCgxKQoJCQkJCWRhdGEgPSB7J2ZiX2R0c2cnOiBmYl9kdHNnLCdqYXpvZXN0JzogamF6b2VzdCwncXInOiAwLCd1c2VyX2NvZGUnOiB1c2VyX2NvZGUsfQoJCQkJCXIuaGVhZGVycy51cGRhdGUoeydvcmlnaW4nOiAnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbScsJ3JlZmVyZXInOiB2ZXJpZmljYXRpb25fdXJsLCdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywnc2VjLWZldGNoLXNpdGUnOiAnc2FtZS1vcmlnaW4nLH0pCgkJCQkJcmVzcG9uc2UzID0gci5wb3N0KCdodHRwczovL20uZmFjZWJvb2suY29te30nLmZvcm1hdChhY3Rpb24pLCBkYXRhID0gZGF0YSwgY29va2llcyA9IHsnY29va2llJzogeW91cl9jb29raWVzfSkKCQkJCQlpZiAnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9kaWFsb2cvb2F1dGgvP2F1dGhfdHlwZT1yZXJlcXVlc3QmcmVkaXJlY3RfdXJpPScgaW4gc3RyKHJlc3BvbnNlMy51cmwpOgoJCQkJCQlyLmhlYWRlcnMucG9wKCdjb250ZW50LXR5cGUnKTtyLmhlYWRlcnMucG9wKCdvcmlnaW4nKQoJCQkJCQlyZXNwb25zZTQgPSByLnBvc3QocmVzcG9uc2UzLnVybCwgZGF0YSA9IGRhdGEsIGNvb2tpZXMgPSB7J2Nvb2tpZSc6IHlvdXJfY29va2llc30pLnRleHQKCQkJCQkJYWN0aW9uID0gcmUuc2VhcmNoKCdhY3Rpb249IiguKj8pIicsIHN0cihyZXNwb25zZTQpKS5ncm91cCgxKS5yZXBsYWNlKCdhbXA7JywgJycpCgkJCQkJCWZiX2R0c2cgPSByZS5zZWFyY2goJ25hbWU9ImZiX2R0c2ciIHZhbHVlPSIoLio/KSInLCBzdHIocmVzcG9uc2U0KSkuZ3JvdXAoMSkKCQkJCQkJamF6b2VzdCA9IHJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IihcZCspIicsIHN0cihyZXNwb25zZTQpKS5ncm91cCgxKQoJCQkJCQlzY29wZSA9IHJlLnNlYXJjaCgnbmFtZT0ic2NvcGUiIHZhbHVlPSIoLio/KSInLCBzdHIocmVzcG9uc2U0KSkuZ3JvdXAoMSkKCQkJCQkJZGlzcGxheSA9IHJlLnNlYXJjaCgnbmFtZT0iZGlzcGxheSIgdmFsdWU9IiguKj8pIicsIHN0cihyZXNwb25zZTQpKS5ncm91cCgxKQoJCQkJCQl1c2VyX2NvZGUgPSByZS5zZWFyY2goJ25hbWU9InVzZXJfY29kZSIgdmFsdWU9IiguKj8pIicsIHN0cihyZXNwb25zZTQpKS5ncm91cCgxKQoJCQkJCQlsb2dnZXJfaWQgPSByZS5zZWFyY2goJ25hbWU9ImxvZ2dlcl9pZCIgdmFsdWU9IiguKj8pIicsIHN0cihyZXNwb25zZTQpKS5ncm91cCgxKQoJCQkJCQlhdXRoX3R5cGUgPSByZS5zZWFyY2goJ25hbWU9ImF1dGhfdHlwZSIgdmFsdWU9IiguKj8pIicsIHN0cihyZXNwb25zZTQpKS5ncm91cCgxKQoJCQkJCQllbmNyeXB0ZWRfcG9zdF9ib2R5ID0gcmUuc2VhcmNoKCduYW1lPSJlbmNyeXB0ZWRfcG9zdF9ib2R5IiB2YWx1ZT0iKC4qPykiJywgc3RyKHJlc3BvbnNlNCkpLmdyb3VwKDEpCgkJCQkJCXJldHVybl9mb3JtYXQgPSByZS5zZWFyY2goJ25hbWU9InJldHVybl9mb3JtYXRcXFtcXF0iIHZhbHVlPSIoLio/KSInLCBzdHIocmVzcG9uc2U0KSkuZ3JvdXAoMSkKCQkJCQkJci5oZWFkZXJzLnVwZGF0ZSh7J29yaWdpbic6ICdodHRwczovL20uZmFjZWJvb2suY29tJywncmVmZXJlcic6IHJlc3BvbnNlMy51cmwsJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLH0pCgkJCQkJCWRhdGEgPSB7J2ZiX2R0c2cnOiBmYl9kdHNnLCdqYXpvZXN0JzogamF6b2VzdCwnc2NvcGUnOiBzY29wZSwnZGlzcGxheSc6IGRpc3BsYXksJ3VzZXJfY29kZSc6IHVzZXJfY29kZSwnbG9nZ2VyX2lkJzogbG9nZ2VyX2lkLCdhdXRoX3R5cGUnOiBhdXRoX3R5cGUsJ2VuY3J5cHRlZF9wb3N0X2JvZHknOiBlbmNyeXB0ZWRfcG9zdF9ib2R5LCdyZXR1cm5fZm9ybWF0W10nOiByZXR1cm5fZm9ybWF0LH0KCQkJCQkJcmVzcG9uc2U1ID0gci5wb3N0KCdodHRwczovL20uZmFjZWJvb2suY29te30nLmZvcm1hdChhY3Rpb24pLCBkYXRhID0gZGF0YSwgY29va2llcyA9IHsnY29va2llJzogeW91cl9jb29raWVzfSkudGV4dAoJCQkJCQl3aW5kb3dzX3JlZmVyZXIgPSByZS5zZWFyY2goJ3dpbmRvdy5sb2NhdGlvbi5ocmVmPSIoLio/KSInLCBzdHIocmVzcG9uc2U1KSkuZ3JvdXAoMSkucmVwbGFjZSgnXFwnLCAnJykKCQkJCQkJci5oZWFkZXJzLnBvcCgnY29udGVudC10eXBlJyk7ci5oZWFkZXJzLnBvcCgnb3JpZ2luJykKCQkJCQkJci5oZWFkZXJzLnVwZGF0ZSh7J3JlZmVyZXInOiAnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS8nLH0pCgkJCQkJCXJlc3BvbnNlNiA9IHIuZ2V0KHdpbmRvd3NfcmVmZXJlciwgY29va2llcyA9IHsnY29va2llJzogeW91cl9jb29raWVzfSkudGV4dAoJCQkJCQlpZiAnU3Vrc2VzIScgaW4gc3RyKHJlc3BvbnNlNik6CgkJCQkJCQlyLmhlYWRlcnMudXBkYXRlKHsnc2VjLWZldGNoLW1vZGUnOiAnbm8tY29ycycsJ3JlZmVyZXInOiAnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJywnSG9zdCc6ICdncmFwaC5mYWNlYm9vay5jb20nLCdhY2NlcHQnOiAnKi8qJywnc2VjLWZldGNoLWRlc3QnOiAnc2NyaXB0Jywnc2VjLWZldGNoLXNpdGUnOiAnY3Jvc3Mtc2l0ZScsfSkKCQkJCQkJCXJlc3BvbnNlNyA9IHIuZ2V0KHN0YXR1c191cmwsIGNvb2tpZXMgPSB7J2Nvb2tpZSc6IHlvdXJfY29va2llc30pLnRleHQKCQkJCQkJCWFjY2Vzc190b2tlbiA9IHJlLnNlYXJjaCgnImFjY2Vzc190b2tlbiI6ICIoLio/KSInLCBzdHIocmVzcG9uc2U3KSkuZ3JvdXAoMSkKCQkJCQkJCQoJCQkJCQkJdG9rZW5ldyA9IG9wZW4oIi50b2tlbi50eHQiLCJ3Iikud3JpdGUoYWNjZXNzX3Rva2VuKQoJCQkJCQkJY29vaz0gb3BlbigiLmNvay50eHQiLCJ3Iikud3JpdGUoeW91cl9jb29raWVzKQoJCQkJCQkJcHJpbnQoJycpCgkJCQkJCQlwcmludChmInt4fVt7aH3iiJp7eH1de2h9IExPR0lOIEJFUkhBU0lMLi4uLi4uLi4uSmFsYW5rYW4gTGFnaSBQZXJpbnRhaG55YSEhISF7eH0gIik7dGltZS5zbGVlcCgxKTtleGl0KCkKCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgoJCQkJCgkJCQlvcy5zeXN0ZW0oJ3JtIC1yZiAudG9rZW4udHh0ICYmIHJtIC1yZiAuY29rLnR4dCcpCgkJCQlwcmludChlKQoJCQkJdGltZS5zbGVlcCgzKQoJCQkJYmFjaygpCglleGNlcHQ6cGFzcwoKCiMgQWxpCmRlZiBtZW51KG15X25hbWUsbXlfaWQpOgoJaXAgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vYXBpLmlwaWZ5Lm9yZyIpLnRleHQKCQoJb3Muc3lzdGVtKCdjbGVhcicpCgliYW5uZXIoKQoJCglwcmludCgnVGVsZWdyYW0g4a+8IEBGR19vbicpCglwcmludCgnJykKCXByaW50KGYnPj4gWW91ciBJRCA6ICcrc3RyKG15X2lkKSkKCXByaW50KGYnPj4gWW91ciBJUCAgOiB7aXB9JykKCXByaW50KCcnKQoJcHJpbnQoJz4+IDEuIENyYWNrIFB1YmxpayA6INmF2YYg2KfZhNin2LXYr9mC2KfYoSAgIOKclO+4jycpCglwcmludCgnPj4gMi4gQ3JhY2sgRm9sbG93ZXIgOiDZhdmGINin2YTZhdiq2KfYqNi52YrZhiDinJTvuI8nKQoJcHJpbnQoJz4+IDMuIENyYWNrIEZpbGUgOiDZhdmGINmF2YTZgSAgICAgICAg4pyU77iPJykKCXByaW50KCc+PiA0LiBDcmFjayBHcnVwIDog2YXZhiDZg9ix2YjYqNin2KogICAgICDinJYnKQkJCglwcmludCgnPj4gMC4gbG9naW4gb3V0IDog2KrYs9is2YrZhCDYrtix2YjYrCAgICAg4pyU77iPICAgJykKCV9fX19fYWx2aW5vX19hZGlqYXlhX19fX18gPSBpbnB1dCgnXG4+PiBjaG9zZSA6ICcpCglpZiBfX19fX2Fsdmlub19fYWRpamF5YV9fX19fIGluIFsnMSddOgoJCWR1bXBfbWFzc2FsKCkKCWVsaWYgX19fX19hbHZpbm9fX2FkaWpheWFfX19fXyBpbiBbJzInXToKCQlmb2xsb3dlcigpCgllbGlmIF9fX19fYWx2aW5vX19hZGlqYXlhX19fX18gaW4gWyc0J106CgkJZ3J1cCgpCgllbGlmIF9fX19fYWx2aW5vX19hZGlqYXlhX19fX18gaW4gWyczJ106CgkJVGFrZUZpbGUoKQoJZWxpZiBfX19fX2Fsdmlub19fYWRpamF5YV9fX19fIGluIFsnNSddOgoJCXJlc3VsdCgpCgllbGlmIF9fX19fYWx2aW5vX19hZGlqYXlhX19fX18gaW4gWycwJ106CgkJTygpCgkJZXhpdCgpCmRlZiBwdWJsaWMoKToKCXRyeToKCQl0b2tlbiA9IG9wZW4oJy50b2tlbi50eHQnLCdyJykucmVhZCgpCgkJY29rID0gb3BlbignLmNvay50eHQnLCdyJykucmVhZCgpCglleGNlcHQgSU9FcnJvcjoKCQlleGl0KCkKCXRyeToKCQlqdW0gPSBpbnQoaW5wdXQoJ1s/XSBDUkFDSyBJRCBMSU1JVCA6ICcpKQoJZXhjZXB0IFZhbHVlRXJyb3I6CgkJdGltZS5zbGVlcCgzKQoJCXByaW50KCd7a31b4pyYXSBOT1QgUFVCTElDIElEICcpCgkJZm9sbG93ZXIoKQoJaWYganVtPDE6CgkJcHJpbnQoJ1vinJhdIFlvdXIgbGltaXQgZXJyb3InKQoJCWV4aXQoKQoJc2VzPXJlcXVlc3RzLlNlc3Npb24oKQoJeXogPSAwCglmb3IgbWV0IGluIHJhbmdlKGp1bSk6CgkJeXorPTEJCQoJCWtsID0gaW5wdXQoJ1vinqRdIElOUFVUIFBVQkxJQyAnK3N0cih5eikrJyA6ICcpCgkJdWlkLmFwcGVuZChrbCkKCWZvciB1c2VyciBpbiB1aWQ6CgkJdHJ5OgoJCQljb2wgPSBzZXMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92Mi4wLycrdXNlcnIrJz9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwKSZhY2Nlc3NfdG9rZW49Jyt0b2tlbmt1WzBdLCBjb29raWVzID0geydjb29raWVzJzpjb2t9KS5qc29uKCkKCQkJZm9yIG1pIGluIGNvbFsnZnJpZW5kcyddWydkYXRhJ106CgkJCQl0cnk6CgkJCQkJaXNvID0gKG1pWydpZCddKyd8JyttaVsnbmFtZSddKQoJCQkJCWlmIGlzbyBpbiBpZDpwYXNzCgkJCQkJZWxzZTppZC5hcHBlbmQoaXNvKQoJCQkJZXhjZXB0OmNvbnRpbnVlCgkJCXByaW50KCdb4oCiXSBUb3RhbCBJZCA6e2h9ICcrc3RyKGxlbihpZCkpKQoJCQlzZXR0aW5nKCkKCQlleGNlcHQgKEtleUVycm9yLElPRXJyb3IpOgoJCQlwcmludCgnW+KcmF0gSWQgSXMgTm90IFB1YmxpYycpCgkJCXRpbWUuc2xlZXAoMykKCQkJcHVibGljKCkKCQlleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CgkJCXByaW50KCd7a31b4pyYXSBFcnJvciBDb25uZWN0aW9uICcpCgkJCWV4aXQoKQoKCmRlZiBmb2xsb3dlcigpOgoJdHJ5OgoJCXRva2VuID0gb3BlbignLnRva2VuLnR4dCcsJ3InKS5yZWFkKCkKCQljb2sgPSBvcGVuKCcuY29rLnR4dCcsJ3InKS5yZWFkKCkKCWV4Y2VwdCBJT0Vycm9yOgoJCWV4aXQoKQoJdHJ5OgoJCWp1bSA9IGludChpbnB1dCgnWz4+XSBDUkFDSyBJRCBMSU1JVCA6INin2YPYqtioINi52K/YryDYp9mE2KfZitiv2YrYp9iqICcpKQoJZXhjZXB0IFZhbHVlRXJyb3I6CgkJcHJpbnQoJ3trfVvinJZdIE5PVCBQVUJMSUMgSUQgJykKCQl0aW1lLnNsZWVwKDMpCgkJZm9sbG93ZXIoKQoJaWYganVtPDE6CgkJcHJpbnQoJ1vinJZdIFlvdXIgbGltaXQgZXJyb3InKQoJCXRpbWUuc2xlZXAoMykKCQlmb2xsb3dlcigpCglzZXM9cmVxdWVzdHMuU2Vzc2lvbigpCgl5eiA9IDAKCWZvciBtZXQgaW4gcmFuZ2UoanVtKToKCQl5eis9MQkJCgkJa2wgPSBpbnB1dCgnWypdIElEID4+ICcrc3RyKHl6KSsnIDogJykKCQl1aWQuYXBwZW5kKGtsKQoJZm9yIHVzZXJyIGluIHVpZDoKCQl0cnk6CgkJCWtvaDIgPSBzZXMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nK3VzZXJyKyc/ZmllbGRzPXN1YnNjcmliZXJzLmxpbWl0KDk5OTk5KSZhY2Nlc3NfdG9rZW49Jyt0b2tlbmt1WzBdLGNvb2tpZXM9eydjb29raWUnOiBjb2t9KS5qc29uKCkKCQkJZm9yIHBpIGluIGtvaDJbJ3N1YnNjcmliZXJzJ11bJ2RhdGEnXToKCQkJCXRyeTppZC5hcHBlbmQocGlbJ2lkJ10rJ3wnK3BpWyduYW1lJ10pCgkJCQlleGNlcHQ6Y29udGludWUKCQkJcHJpbnQoJ1s+Pl0gVG90YWwgSWQgOiAnK3N0cihsZW4oaWQpKSkKCQkJc2V0dGluZygpCgkJZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgoJCQlwcmludCgnW+Kcll0gTm8gQ29ubmVjdGlvbiAgJykKCQkJZXhpdCgpCgkJZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKCQkJcHJpbnQoJ1vinJhdIElkIElzIE5vdCBQdWJsaWMnKQoJCQl0aW1lLnNsZWVwKDMpCgkJCWZvbGxvd2VyKCkKCmRlZiBUYWtlRmlsZSgpOgoJdHJ5OgoJCXRva2VuID0gb3BlbignLnRva2VuLnR4dCcsJ3InKS5yZWFkKCkKCQljb2sgPSBvcGVuKCcuY29rLnR4dCcsJ3InKS5yZWFkKCkKCWV4Y2VwdCBJT0Vycm9yOgoJCWV4aXQoKQoJdHJ5OgoJCQoJCWp1bSA9IGlucHV0KCdbP10gSU5QVVQgRklMRSA6ICcpCgkJZm9yIGxpbmUgaW4gb3BlbihqdW0sICdyJykucmVhZGxpbmVzKCk6CgkJCWlkLmFwcGVuZChsaW5lLnN0cmlwKCkpCgkJcHJpbnQoJ1vigKJdIFRvdGFsIElkIDogJytzdHIobGVuKGlkKSkpCgkJc2V0dGluZygpCglleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CgkJCXByaW50KCdb4pyYXSBObyBDb25uZWN0aW9uICAnKQoJCQlleGl0KCkKCWV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CgkJCXByaW50KCdb4pyYXSBJZCBJcyBOb3QgUHVibGljJykKCQkJdGltZS5zbGVlcCgzKQoJCQlmb2xsb3dlcigpCgpkZWYgZHVtcF9tYXNzYWwoKToKCXRyeToKCQl0b2tlbiA9IG9wZW4oJy50b2tlbi50eHQnLCdyJykucmVhZCgpCgkJY29rID0gb3BlbignLmNvay50eHQnLCdyJykucmVhZCgpCglleGNlcHQgSU9FcnJvcjoKCQlleGl0KCkKCXRyeToKCQlqdW0gPSBpbnQoaW5wdXQoJz4+IFRhcmdldCBJZCA/INi52K/YryDYp9mE2KfZitiv2YrYp9iqINin2YTZhdiz2KrZh9iv2YHZhzogJykpCglleGNlcHQgVmFsdWVFcnJvcjoKCQlwcmludCgnPj4gTWFzdWtrYW4gQW5na2EgQW5qaW5nLCBNYWxhaCBIdXJ1ZmYgJykKCQlleGl0KCkKCWlmIGp1bTwxIG9yIGp1bT4xMDA6CgkJcHJpbnQoJz4+IEdhZ2FsIER1bXAgSWR6ICcpCgkJZXhpdCgpCglzZXM9cmVxdWVzdHMuU2Vzc2lvbigpCgl5eiA9IDAKCWZvciBtZXQgaW4gcmFuZ2UoanVtKToKCQl5eis9MQoJCWtsID0gaW5wdXQoJz4+IElkIFRhcmdldCAnK3N0cih5eikrJyA6ICcpCgkJdWlkLmFwcGVuZChrbCkKCWZvciB1c2VyciBpbiB1aWQ6CgkJdHJ5OgoJCQljb2wgPSBzZXMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92Mi4wLycrdXNlcnIrJz9maWVsZHM9ZnJpZW5kcy5saW1pdCg1MDAwKSZhY2Nlc3NfdG9rZW49Jyt0b2tlbmt1WzBdLCBjb29raWVzID0geydjb29raWVzJzpjb2t9KS5qc29uKCkKCQkJZm9yIG1pIGluIGNvbFsnZnJpZW5kcyddWydkYXRhJ106CgkJCQl0cnk6CgkJCQkJaXNvID0gKG1pWydpZCddKyd8JyttaVsnbmFtZSddKQoJCQkJCWlmIGlzbyBpbiBpZDpwYXNzCgkJCQkJZWxzZTppZC5hcHBlbmQoaXNvKQoJCQkJZXhjZXB0OmNvbnRpbnVlCgkJZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKCQkJcGFzcwoJCWV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKCQkJcHJpbnQoJyAnKQoJCQkKCQkJcHJpbnQoJz4+IFNpbnlhbCBMb2ggS3VyYW5nIEJhZ3VzICcpCgkJCWV4aXQoKQoJdHJ5OgoJCXByaW50KCcnKQoJCXByaW50KGYnPj4gSUQgOiDYudiv2K8g2KfZhNin2YrYr9mK2KfYqntofScrc3RyKGxlbihpZCkpKQoJCXNldHRpbmcoKQoJZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgoJCXByaW50KGYne3h9JykKCQlwcmludCgnPj4gU2lueWFsIExvaCBLdXJhbmcgQmFndXMgJykKCQliYWNrKCkKCWV4Y2VwdCAoS2V5RXJyb3IsSU9FcnJvcik6CgkJcHJpbnQoZic+PntrfSBQZXJ0ZW1hbmFuIFRpZGFrIFB1YmxpYyB7eH0nKQoJCXRpbWUuc2xlZXAoMykKCQliYWNrKCkKCmRlZiBzZXR0aW5nKCk6CglwcmludChmJ3t4fT4+IDEuIElkIG9sZCA6INiz2KrZh9iv2KfZgSDYp9mK2K/Zitin2Kog2YLYr9mK2YXZhyAnKQoJcHJpbnQoJz4+IDIuIElkIE5ldyA6INin2LPYqtmH2K/Yp9mBINin2YrYr9mK2KfYqiDYrNiv2YrYr9mHICcpCglwcmludCgnJykKCWh1ID0gaW5wdXQoJz4+IENob3NlIDogJykKCWlmIGh1IGluIFsnMScsJzAxJ106CgkJZm9yIHR1YSBpbiBzb3J0ZWQoaWQpOgoJCQlpZDIuYXBwZW5kKHR1YSkKCgllbGlmIGh1IGluIFsnMicsJzAyJ106CgkJbXVkYT1bXQoJCWZvciBiYWNvdCBpbiBzb3J0ZWQoaWQpOgoJCQltdWRhLmFwcGVuZChiYWNvdCkKCQliY209bGVuKG11ZGEpCgkJYmNtaT0oYmNtLTEpCgkJZm9yIHhtdWQgaW4gcmFuZ2UoYmNtKToKCQkJaWQyLmFwcGVuZChtdWRhW2JjbWldKQoJCQliY21pIC09MQojCWVsaWYgaHUgaW4gWyczJywnMDMnXToKIwkJZm9yIGJhY290IGluIGlkOgojCQkJeHggPSByYW5kb20ucmFuZGludCgwLGxlbihpZDIpKQojCQkJaWQyLmluc2VydCh4eCxiYWNvdCkKCWVsc2U6CgkJcHJpbnQoJz4+IFBJTElIIFlBTkcgQkVOQVIgQkFORyAnKQoJCWV4aXQoKQoJcHJpbnQoJz4+IDEuIE1vYmlsZSAnKQojICAgIHByaW50KCc+PiAyLiBNYmFzaWMgJykKIyAgICBwcmludCgnPj4gMy4gVG91Y2ggICcpCiMgICAgcHJpbnQoJz4+IDQuIE10b3VjaCAnKQoJcHJpbnQoJycpCgloYyA9IGlucHV0KCc+PiBDaG9zZSA6ICcpCglpZiBoYyBpbiBbJzEnLCcwMSddOgoJCW1ldGhvZC5hcHBlbmQoJ21vYmlsZScpCgllbGlmIGhjIGluIFsnJ106CgkJcHJpbnQoJz4+IFBJTElIIFlBTkcgQkVOQVIgQkFORyAnKQoJCXNldHRpbmcoKQojCWVsaWYgaGMgaW4gWycyJywnMDInXToKIwkJbWV0aG9kLmFwcGVuZCgnZnJlZScpCiMJZWxpZiBoYyBpbiBbJzMnLCcwMyddOgojCQltZXRob2QuYXBwZW5kKCd0b3VjaCcpCgllbGlmIGhjIGluIFsnNCcsJzA0J106CgkJbWV0aG9kLmFwcGVuZCgnbWJhc2ljJykKCWVsc2U6CgkJbWV0aG9kLmFwcGVuZCgnbW9iaWxlJykKCXByaW50KCcnKQoJX2plbWJvdF8gPSBpbnB1dCgnPj4gQWRkIEFwcCA6INin2LjZh9in2LEg2KfZhNiq2LfYqNmK2YLYp9iqINin2YTZhdix2KrYqNi32YcgKCBZL3QgKSAnKQoJaWYgX2plbWJvdF8gaW4gWycnXToKCQlwcmludCgnPj4gUGlsaWggWWFuZyBCZW5lciBLb250b2wgJykKCQliYWNrKCkKCWVsaWYgX2plbWJvdF8gaW4gWyd5JywnWSddOgoJCXRhcGxpa2FzaS5hcHBlbmQoJ3lhJykKCWVsc2U6CgkJdGFwbGlrYXNpLmFwcGVuZCgnbm8nKQoJcHdwbHVzPWlucHV0KCc+PiBQYXNzd29yZCBNYW51YWwgOiDYqNin2LPZiNix2K8g2YrYr9mI2YogKFQg2LnYtNmI2KfYptmKKSggWS90ICkgJykKCWlmIHB3cGx1cyBpbiBbJ3knLCdZJ106CgkJcHdwbHVzcy5hcHBlbmQoJ3lhJykKCQljZXRhayhuZWwoJ1tbY3lhbl3igKJbd2hpdGVdXSBNYXN1a2thbiBLYXRhc2FuZGkgVGFtYmFoYW4gTWluaW1hbCA2IEthcmFrdGVyXG5bW2N5YW5d4oCiW3doaXRlXV0gQ29udG9oIDpbZ3JlZW5dIGtha2FrLG5nZW50b2QsYWRpa1t3aGl0ZV0gJykpCgkJcHdrdT1pbnB1dCgnPj4gTWFzdWtrYW4gUGFzc3dvcmQgVGFtYmFoYW4gOiAnKQoJCXB3a3VoPXB3a3Uuc3BsaXQoJywnKQoJCWZvciB4cHcgaW4gcHdrdWg6CgkJCXB3bnlhLmFwcGVuZCh4cHcpCgllbHNlOgoJCXB3cGx1c3MuYXBwZW5kKCdubycpCglwYXNzd3JkKCkgCmRlZiBwYXNzd3JkKCk6CgkKCQoJd2l0aCB0cmVkKG1heF93b3JrZXJzPTMwKSBhcyBwb29sOgoJCWZvciB5dXpvbmcgaW4gaWQyOgoJCQlpZGYsbm1mID0geXV6b25nLnNwbGl0KCd8JylbMF0seXV6b25nLnNwbGl0KCd8JylbMV0ubG93ZXIoKQoJCQlmcnMgPSBubWYuc3BsaXQoJyAnKVswXQoJCQlwd3YgPSBbXQoJCQlpZiBsZW4obm1mKTw2OgoJCQkJaWYgbGVuKGZycyk8MzoKCQkJCQlwYXNzCgkJCQllbHNlOgoJCQkJCXB3di5hcHBlbmQobm1mKQoJCQkJCXB3di5hcHBlbmQoZnJzKycxMjMnKQoJCQkJCXB3di5hcHBlbmQoZnJzKycxMjM0JykKCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzNDUnKQoJCQkJCXB3di5hcHBlbmQoJ3Fxd3dlZXJyJykKCQkJCQlwd3YuYXBwZW5kKCcxMTIyMzM0NDU1NjY3NycpCgkJCQkJcHd2LmFwcGVuZCgnYWFhYXNzc3MnKQoJCQkJCXB3di5hcHBlbmQoJ3p6enp4eHh4JykKCQkJCQlwd3YuYXBwZW5kKCcwNzcwMDc3MCcpCgkJCQkJcHd2LmFwcGVuZCgnMDc4MDA3ODAnKQoJCQkJCXB3di5hcHBlbmQoJ2ZpcnN0IGxhc3QnKQoJCQkJCXB3di5hcHBlbmQoJ25ubm5tbW1tJykKCQkJCQlwd3YuYXBwZW5kKCdtbW1tbm5ubicpCgkJCQkJcHd2LmFwcGVuZCgnMTIzNDVxd2VydCcpCgkJCQkJcHd2LmFwcGVuZCgnMDA5OTg4NzcnKQoJCQkJCXB3di5hcHBlbmQoJzE5OTAxOTkwJykKCQkJCQlwd3YuYXBwZW5kKCcxOTkxMTk5MScpCgkJCQkJcHd2LmFwcGVuZCgnMTk5MjE5OTInKQoJCQkJCXB3di5hcHBlbmQoJzE5OTMxOTkzJykKCQkJCQlwd3YuYXBwZW5kKCcxOTk0MTk5NCcpCgkJCQkJcHd2LmFwcGVuZCgnMTk5NTE5OTUnKQoJCQkJCXB3di5hcHBlbmQoJzE5OTYxOTk2JykKCQkJCQlwd3YuYXBwZW5kKCcxOTk3MTk5NycpCgkJCQkJcHd2LmFwcGVuZCgnMTk5ODE5OTgnKQoJCQkJCXB3di5hcHBlbmQoJzE5OTkxOTk5JykKCQkJCQlwd3YuYXBwZW5kKCcyMDAxMjAwMScpCgkJCWVsc2U6CgkJCQlpZiBsZW4oZnJzKTwzOgoJCQkJCXB3di5hcHBlbmQobm1mKQoJCQkJZWxzZToKCQkJCQlwd3YuYXBwZW5kKG5tZikKCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzJykKCQkJCQlwd3YuYXBwZW5kKGZycysnMTIzNCcpCgkJCQkJcHd2LmFwcGVuZChmcnMrJzEyMzQ1JykKCQkJCQlwd3YuYXBwZW5kKCdxcXd3ZWVycicpCgkJCQkJcHd2LmFwcGVuZCgnMTEyMjMzNDQ1NTY2NzcnKQoJCQkJCXB3di5hcHBlbmQoJ2FhYWFzc3NzJykKCQkJCQlwd3YuYXBwZW5kKCd6enp6eHh4eCcpCgkJCQkJcHd2LmFwcGVuZCgnMDc3MDA3NzAnKQoJCQkJCXB3di5hcHBlbmQoJzA3ODAwNzgwJykKCQkJCQlwd3YuYXBwZW5kKCdmaXJzdCBsYXN0JykKCQkJCQlwd3YuYXBwZW5kKCdubm5ubW1tbScpCgkJCQkJcHd2LmFwcGVuZCgnbW1tbW5ubm4nKQoJCQkJCXB3di5hcHBlbmQoJzEyMzQ1cXdlcnQnKQoJCQkJCXB3di5hcHBlbmQoJzAwOTk4ODc3JykKCQkJCQlwd3YuYXBwZW5kKCcxOTkwMTk5MCcpCgkJCQkJcHd2LmFwcGVuZCgnMTk5MTE5OTEnKQoJCQkJCXB3di5hcHBlbmQoJzE5OTIxOTkyJykKCQkJCQlwd3YuYXBwZW5kKCcxOTkzMTk5MycpCgkJCQkJcHd2LmFwcGVuZCgnMTk5NDE5OTQnKQoJCQkJCXB3di5hcHBlbmQoJzE5OTUxOTk1JykKCQkJCQlwd3YuYXBwZW5kKCcxOTk2MTk5NicpCgkJCQkJcHd2LmFwcGVuZCgnMTk5NzE5OTcnKQoJCQkJCXB3di5hcHBlbmQoJzE5OTgxOTk4JykKCQkJCQlwd3YuYXBwZW5kKCcxOTk5MTk5OScpCgkJCQkJcHd2LmFwcGVuZCgnMjAwMTIwMDEnKQoJCQlpZiAneWEnIGluIHB3cGx1c3M6CgkJCQlmb3IgeHB3ZCBpbiBwd255YToKCQkJCQlwd3YuYXBwZW5kKHhwd2QpCgkJCWVsc2U6cGFzcwoJCQlpZiAnbW9iaWxlJyBpbiBtZXRob2Q6CgkJCQlwb29sLnN1Ym1pdChjcmFjayxpZGYscHd2KQoJCQllbGlmICdmcmVlJyBpbiBtZXRob2Q6CgkJCQlwb29sLnN1Ym1pdChjcmFja2ZyZWUsaWRmLHB3dikKCQkJZWxpZiAndG91Y2gnIGluIG1ldGhvZDoKCQkJCXBvb2wuc3VibWl0KGNyYWNrdG91Y2gsaWRmLHB3dikKCQkJZWxpZiAnbWJhc2ljJyBpbiBtZXRob2Q6CgkJCQlwb29sLnN1Ym1pdChjcmFja21iYXNpYyxpZGYscHd2KQoJCQllbHNlOgoJCQkJcG9vbC5zdWJtaXQoY3JhY2ttYmFzaWMsaWRmLHB3dikKCXByaW50KCcnKQoJY2V0YWsobmVsKCdcdFtjeWFuXeKck1tncmVlbl0gQ3JhY2sgU2VsZXNhaSBOZ2FiLCBKYW5nYW4gTHVwYSBCZXJzeXVrdXJbY3lhbl0g4pyTW3doaXRlXSAnKSkKCXByaW50KGYnW3tifeKAont4fV17aH0gT0sgOiB7aH0lcyAnJShvaykpCglwcmludChmJ3t4fVt7Yn3igKJ7eH1de2t9IENQIDoge2t9JXN7eH0gJyUoY3ApKQoJcHJpbnQoJycpCglwcmludCgnPj4gTGFuanV0IENyYWNrIEtlbWJhbGkgKCBZL3QgKSA/ICcpCgl3b2kgPSBpbnB1dCgnPj4gUGlsaWggOiAnKQoJaWYgd29pIGluIFsneScsJ1knXToKCQliYWNrKCkKCWVsc2U6CgkJcHJpbnQoZidcdHt4fTw+e2t9IEdvb2QgQnllIHt4fSA8PiAnKQoJCXRpbWUuc2xlZXAoMikKCQlleGl0KCkKCgpkZWYgY3JhY2soaWRmLHB3dik6CglnbG9iYWwgbG9vcCxvayxjcAoJYmkgPSByYW5kb20uY2hvaWNlKFt1LGssa2ssYixoLGhoXSkKCXBlcnMgPSBsb29wKjEwMC9sZW4oaWQyKQoJZmZmID0gJyUnCglwcmludCgnXHIlc3sgW/CWpI1dICVzLyVzIOKemSBbT0tdICVzIOKemSBbQ1BdICVzIC4uIH0gJXMlcyVzJyUoYmksbG9vcCxsZW4oaWQyKSxvayxjcCxpbnQocGVycyksc3RyKGZmZikseCksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQoJdWEgPSByYW5kb20uY2hvaWNlKHVnZW4pCgl1YTIgPSByYW5kb20uY2hvaWNlKHVnZW4yKQoJc2VzID0gcmVxdWVzdHMuU2Vzc2lvbigpCglmb3IgcHcgaW4gcHd2OgoJCXRyeToKCQkJdGl4ID0gdGltZS50aW1lKCkKCQkJc2VzLmhlYWRlcnMudXBkYXRlKHsiSG9zdCI6J20uZmFjZWJvb2suY29tJywidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLCJ1c2VyLWFnZW50Ijp1YTIsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCpbaW5zZXJ0ZWQgYnkgY3l0aG9uIHRvIGF2b2lkIGNvbW1lbnQgY2xvc2VyXS9baW5zZXJ0ZWQgYnkgY3l0aG9uIHRvIGF2b2lkIGNvbW1lbnQgc3RhcnRdKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsImRudCI6IjEiLCJ4LXJlcXVlc3RlZC13aXRoIjoibWFyay52aWEuZ3AiLCJzZWMtZmV0Y2gtc2l0ZSI6InNhbWUtb3JpZ2luIiwic2VjLWZldGNoLW1vZGUiOiJjb3JzIiwic2VjLWZldGNoLXVzZXIiOiJlbXB0eSIsInNlYy1mZXRjaC1kZXN0IjoiZG9jdW1lbnQiLCJyZWZlcmVyIjoiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS8iLCJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIGJyIiwiYWNjZXB0LWxhbmd1YWdlIjoiZW4tR0IsZW4tVVM7cT0wLjksZW47cT0wLjgifSkKCQkJcCA9IHNlcy5nZXQoJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vaW5kZXgucGhwP25leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSUyRnRvb2xzJTJGZGVidWclMkZhY2Nlc3N0b2tlbiUyRicpLnRleHQKCQkJZGF0YWEgPXsibHNkIjpyZS5zZWFyY2goJ25hbWU9ImxzZCIgdmFsdWU9IiguKj8pIicsIHN0cihwKSkuZ3JvdXAoMSksImphem9lc3QiOnJlLnNlYXJjaCgnbmFtZT0iamF6b2VzdCIgdmFsdWU9IiguKj8pIicsIHN0cihwKSkuZ3JvdXAoMSksInVpZCI6aWRmLCJmbG93IjoibG9naW5fbm9fcGluIiwicGFzcyI6cHcsIm5leHQiOiJodHRwczovL2RldmVsb3BlcnMuZmFjZWJvb2suY29tL3Rvb2xzL2RlYnVnL2FjY2Vzc3Rva2VuLyJ9CgkJCXNlcy5oZWFkZXJzLnVwZGF0ZSh7Ikhvc3QiOidtLmZhY2Vib29rLmNvbScsImNhY2hlLWNvbnRyb2wiOiJtYXgtYWdlPTAiLCJ1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzIjoiMSIsIm9yaWdpbiI6Imh0dHBzOi8vbS5mYWNlYm9vay5jb20iLCJjb250ZW50LXR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLCJ1c2VyLWFnZW50Ijp1YSwiYWNjZXB0IjoidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKltpbnNlcnRlZCBieSBjeXRob24gdG8gYXZvaWQgY29tbWVudCBjbG9zZXJdL1tpbnNlcnRlZCBieSBjeXRob24gdG8gYXZvaWQgY29tbWVudCBzdGFydF0qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwieC1yZXF1ZXN0ZWQtd2l0aCI6Im1hcmsudmlhLmdwIiwic2VjLWZldGNoLXNpdGUiOiJzYW1lLW9yaWdpbiIsInNlYy1mZXRjaC1tb2RlIjoiY29ycyIsInNlYy1mZXRjaC11c2VyIjoiZW1wdHkiLCJzZWMtZmV0Y2gtZGVzdCI6ImRvY3VtZW50IiwicmVmZXJlciI6Imh0dHBzOi8vbS5mYWNlYm9vay5jb20vaW5kZXgucGhwP25leHQ9aHR0cHMlM0ElMkYlMkZkZXZlbG9wZXJzLmZhY2Vib29rLmNvbSUyRnRvb2xzJTJGZGVidWclMkZhY2Nlc3N0b2tlbiUyRiIsImFjY2VwdC1lbmNvZGluZyI6Imd6aXAsIGRlZmxhdGUgYnIiLCJhY2NlcHQtbGFuZ3VhZ2UiOiJlbi1HQixlbi1VUztxPTAuOSxlbjtxPTAuOCJ9KQoJCQlwbyA9IHNlcy5wb3N0KCdodHRwczovL20uZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC92YWxpZGF0ZS1wYXNzd29yZC8/c2hibD0wJyxkYXRhPWRhdGFhLGFsbG93X3JlZGlyZWN0cz1GYWxzZSkKCQkJaWYgImNoZWNrcG9pbnQiIGluIHBvLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6CgkJCQlpZiAneWEnIGluIG9wcmVrOgoJCQkJCWFrdW4uYXBwZW5kKGlkZisnfCcrcHcpCgkJCQkJY2VrZXIoaWRmLHB3KQoJCQkJZWxzZToKCQkJCQlwcmludCgnXG4nKQoJCQkJCXN0YXR1c2NwID0gZicnJ/CdmbXwnZmw8J2ZsvCdmbTwnZmx8J2ZvvCdmb7wnZm64pyW77iPCuKLmOKUgOKUgOKUgOKUgOKUgOKUgWFsaTMxM+KUgeKUgOKUgOKUgOKUgOKUgOKLmQrinZYgLSDwnZCU8J2QkvCdkITwnZCR8J2QjfCdkIDwnZCMIDoge2lkZn1cbgrinZYgLSDwnZCP8J2QgPCdkJLwnZCS8J2QlvCdkJHwnZCDIDoge3B3fVxuCuKLmOKUgOKUgOKUgOKUgOKUgEBGR19vbuKUgeKUgOKUgOKUgOKUgOKUgOKLmQpATG9yZF9BbGkyICAtICBARkdfb24JCQkJCQoJCQkJCScnJwoJCQkJCXN0YXR1c2NwMSA9IG5lbChzdGF0dXNjcCwgc3R5bGU9J3JlZCcpCgkJCQkJY2V0YWsobmVsKHN0YXR1c2NwMSwgdGl0bGU9J1NFU0knKSkKCQkJCQlvcGVuKCdDUC8nK2NwYywnYScpLndyaXRlKGlkZisnfCcrcHcrJ1xuJykKCQkJCQlha3VuLmFwcGVuZChpZGYrJ3wnK3B3KQoJCQkJCWNwKz0xCgkJCQkJcmVxdWVzdHMuZ2V0KCJodHRwczovL2FwaS50ZWxlZ3JhbS5vcmcvYm90IitzdHIodG9rZW4pKyIvc2VuZE1lc3NhZ2U/Y2hhdF9pZD0iK3N0cihJRCkrIiZ0ZXh0PSIrc3RyKHN0YXR1c2NwKSkKCQkJCWJyZWFrCgkJCWVsaWYgImNfdXNlciIgaW4gc2VzLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6CgkJCQloZWFkYXBwPXsidXNlci1hZ2VudCI6Ik5va2lhWDItMDEvNS4wICgwOC4zNSkgUHJvZmlsZS9NSURQLTIuMSBDb25maWd1cmF0aW9uL0NMREMtMS4xIE1vemlsbGEvNS4wIEFwcGxlV2ViS2l0LzQyMCsgKEtIVE1MLCBsaWtlIEdlY2tvKSBTYWZhcmkvNDIwKyJ9CgkJCQlpZiAnbm8nIGluIHRhcGxpa2FzaToKCQkJCQlvays9MQoJCQkJCWNva2k9cG8uY29va2llcy5nZXRfZGljdCgpCgkJCQkJa3VraSA9ICgiOyIpLmpvaW4oWyAiJXM9JXMiICUgKGtleSwgdmFsdWUpIGZvciBrZXksIHZhbHVlIGluIHNlcy5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKSBdKQoJCQkJCW9wZW4oJ09LLycrb2tjLCdhJykud3JpdGUoaWRmKyd8JytwdysnfCcra3VraSsnXG4nKQoJCQkJCXByaW50KCdcbicpCgkJCQkJc3RhdHVzb2sgPSBmJycn8J2ZtfCdmbDwnZmy8J2ZtPCdmbHwnZm+8J2ZvvCdmbrinJTvuI8K4ouY4pSA4pSA4pSA4pSA4pSA4pSB8JOBoWxp77+977+977+977+94pSB4pSA4pSA4pSA4pSA4pSA4ouZCuKdliAtIPCdkJTwnZCS8J2QhPCdkJHwnZCN8J2QgPCdkIwgOiB7aWRmfVxuCuKdliAtIPCdkI/wnZCA8J2QkvCdkJLwnZCW8J2QkfCdkIMgOiB7cHd9XG4K4ouY4pSA4pSA4pSA4pSA4pSA4pSBYWxpMzEz77+977+977+977+977+977+977+977+94pSB4pSA4pSA4pSA4pSA4pSA4ouZCkBGR19vbiAgLSAgQExvcmRfQWxpMgkJCQkJCgkJCQkJJycnCgkJCQkJc3RhdHVzb2sxID0gbmVsKHN0YXR1c29rLCBzdHlsZT0nZ3JlZW4nKQoJCQkJCWNldGFrKG5lbChzdGF0dXNvazEsIHRpdGxlPScgTk8gU0VTSScpKQoJCQkJCXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9hcGkudGVsZWdyYW0ub3JnL2JvdCIrc3RyKHRva2VuKSsiL3NlbmRNZXNzYWdlP2NoYXRfaWQ9IitzdHIoSUQpKyImdGV4dD0iK3N0cihzdGF0dXNvaykpCgkJCQkJYnJlYWsKCQkJCWVsaWYgJ3lhJyBpbiB0YXBsaWthc2k6CgkJCQkJb2srPTEKCQkJCQljb2tpPXBvLmNvb2tpZXMuZ2V0X2RpY3QoKQoJCQkJCWt1a2kgPSAoIjsiKS5qb2luKFsgIiVzPSVzIiAlIChrZXksIHZhbHVlKSBmb3Iga2V5LCB2YWx1ZSBpbiBzZXMuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCkgXSkKCQkJCQlvcGVuKCdPSy8nK29rYywnYScpLndyaXRlKGlkZisnfCcrcHcrJ3wnK2t1a2krJ1xuJykKCQkJCQl1c2VyPWlkZgoJCQkJCWluZm9ha3VuID0gIiIKCQkJCQlzZXNzaW9uID0gcmVxdWVzdHMuU2Vzc2lvbigpCgkJCQkJZ2V0X2lkID0gc2Vzc2lvbi5nZXQoImh0dHBzOi8vbS5mYWNlYm9vay5jb20vcHJvZmlsZS5waHAiLGNvb2tpZXM9Y29raSxoZWFkZXJzPWhlYWRhcHApLnRleHQKCQkJCQluYW1hID0gcmUuZmluZGFsbCgnXDx0aXRsZVw+KC4qPyk8XC90aXRsZVw+JyxzdHIoZ2V0X2lkKSlbMF0KCQkJCQlyZXNwb25zZSA9IHNlc3Npb24uZ2V0KCJodHRwczovL20uZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP3Y9aW5mbyIsY29va2llcz1jb2tpLGhlYWRlcnM9aGVhZGFwcCkudGV4dAoJCQkJCXJlc3BvbnNlMiA9IHNlc3Npb24uZ2V0KCJodHRwczovL20uZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP3Y9ZnJpZW5kcyIsY29va2llcz1jb2tpLGhlYWRlcnM9aGVhZGFwcCkudGV4dAoJCQkJCXJlc3BvbnNlMyA9IHNlc3Npb24uZ2V0KGYiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS97dXNlcn0vYWxsYWN0aXZpdHkvP2NhdGVnb3J5X2tleT1hbGwmc2VjdGlvbl9pZD15ZWFyXzIwMjImdGltZXN0YXJ0PTE2MDk0ODgwMDAmdGltZWVuZD0xNjQxMDIzOTk5JnNlY3Rpb25Mb2FkaW5nSUQ9bV90aW1lbGluZV9sb2FkaW5nX2Rpdl8xNjQxMDIzOTk5XzE2MDk0ODgwMDBfOF8iLGNvb2tpZXM9Y29raSxoZWFkZXJzPWhlYWRhcHApLnRleHQKCQkJCQlyZXNwb25zZTQgPSBzZXNzaW9uLmdldChmImh0dHBzOi8vbS5mYWNlYm9vay5jb20vdGltZWxpbmUvYXBwX2NvbGxlY3Rpb24vP2NvbGxlY3Rpb25fdG9rZW49e3VzZXJ9JTNBMTg0OTg1MDcxNTM4MDAyJTNBMzImX3JkYz0xJl9yZHIiLGNvb2tpZXM9Y29raSxoZWFkZXJzPWhlYWRhcHApLnRleHQKCQkJCQl0cnk6bm9tZXIgPSByZS5maW5kYWxsKCdcPGFcIGhyZWZcPVwidGVsXDpcKy4qP1wiPlw8c3BhblwgZGlyXD1cImx0clwiPiguKj8pPFwvc3Bhbj48XC9hPicsc3RyKHJlc3BvbnNlKSlbMF0KCQkJCQlleGNlcHQ6bm9tZXIgPSAiIgoJCQkJCXRyeTplbWFpbCA9IHJlLmZpbmRhbGwoJ1w8YSBocmVmXD1cImh0dHBzXDpcL1wvbG1cLmZhY2Vib29rXC5jb21cL2xcLnBocFw/dVw9bWFpbC4qP1wiIHRhcmdldFw9XCIuKj9cIlw+KC4qPyk8XC9hXD4nLHN0cihyZXNwb25zZSkpWzBdLnJlcGxhY2UoJyYjMDY0OycsJ0AnKQoJCQkJCWV4Y2VwdDplbWFpbD0iIgoJCQkJCXRyeTp0dGwgPSByZS5maW5kYWxsKCdcPFwvdGRcPlw8dGRcIHZhbGlnblw9XCJ0b3BcIiBjbGFzc1w9XCIuKj9cIlw+XDxkaXZcIGNsYXNzXD1cIi4qP1wiXD4oXGQrXHMrXHcrXHMrXGQrKTxcL2Rpdlw+XDxcL3RkXD5cPFwvdHJcPicsc3RyKHJlc3BvbnNlKSlbMF0KCQkJCQlleGNlcHQ6dHRsPSIiCgkJCQkJdHJ5OnRlbWFuID0gcmUuZmluZGFsbCgnXDxoM1wgY2xhc3NcPVwiLio/XCJcPlRlbWFuXCBcKCguKj8pXCk8XC9oM1w+JyxzdHIocmVzcG9uc2UyKSlbMF0KCQkJCQlleGNlcHQ6dGVtYW4gPSAiIgoJCQkJCXRyeTpwZW5naWt1dCA9IHJlLmZpbmRhbGwoJ1w8c3BhblwgY2xhc3NcPVwiLio/XCJcPiguKj8pXDxcL3NwYW5cPicsc3RyKHJlc3BvbnNlNCkpWzFdCgkJCQkJZXhjZXB0OnBlbmdpa3V0ID0gIiIKCQkJCQl0cnk6CgkJCQkJCXRhaHVuID0gIiIKCQkJCQkJY2VrX3RobiA9IHJlLmZpbmRhbGwoJ1w8ZGl2XCBjbGFzc1w9XCIuKj9cIiBpZFw9XCJ5ZWFyXyguKj8pXCI+JyxzdHIocmVzcG9uc2UzKSkKCQkJCQkJZm9yIG5lbmVuIGluIGNla190aG46CgkJCQkJCQl0YWh1biArPSBuZW5lbisiLCAiCgkJCQkJZXhjZXB0OnBhc3MKCgkJCQkJaW5mb2FrdW4gKz0gZicnJ/CdmbXwnZmw8J2ZsvCdmbTwnZmx8J2ZvvCdmb7wnZm6CuKLmOKUgOKUgOKUgOKUgOKUgOKUgfCThqnvv73vv73vv73vv71hbGnvv73vv73vv73vv73vv73vv73vv73vv73ilIHilIDilIDilIDilIDilIDii5kK4p2WIC0g8J2QlPCdkJLwnZCE8J2QkfCdkI3wnZCA8J2QjCA6IHtpZGZ9XG7inZYgLSDwnZCP8J2QgPCdkJLwnZCS8J2QlvCdkJHwnZCDIDoge3B3fVxuPD48Pjw+PD48Pjw+PD48Pjw+PD48Pjw+PD48Plxu4p2WIC0gSnVtbGFoIFRlbWFuIDoge3RlbWFufVxu4p2WIC0gSnVtbGFoIFBlbmdpa3V0IDoge3Blbmdpa3V0fVxu4p2WIC0gRW1haWwgQWt0aWYgOiB7ZW1haWx9XG7inZYgLSBOb21vciBBa3RpZiA6IHtub21lcn1cbuKdliAtIFRhaHVuIEFrdW4gOiB7dGFodW59XG7inZYgLSBUYW5nZ2FsIExhaGlyIDoge3R0bH1cbuKLmOKUgOKUgOKUgOKUgOKUgOKUgfCThqnwnZGhbGnvv73vv73vv73vv73ilIHilIDilIDilIDilIDilIDii5kKQEZHX29uIC0gIEBMb3JkX0FsaTInJycKCQkJCQlyZXF1ZXN0cy5nZXQoImh0dHBzOi8vYXBpLnRlbGVncmFtLm9yZy9ib3QiK3N0cih0b2tlbikrIi9zZW5kTWVzc2FnZT9jaGF0X2lkPSIrc3RyKElEKSsiJnRleHQ9IitzdHIoaW5mb2FrdW4pKQoKCQkJCQloaXQxLCBoaXQyID0gMCwwCgkJCQkJY2VrID1zZXNzaW9uLmdldCgiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9zZXR0aW5ncy9hcHBzL3RhYmJlZC8/dGFiPWFjdGl2ZSIsY29va2llcz1jb2tpLGhlYWRlcnM9aGVhZGFwcCkudGV4dAoJCQkJCWNlazIgPSBzZXNzaW9uLmdldCgiaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9zZXR0aW5ncy9hcHBzL3RhYmJlZC8/dGFiPWluYWN0aXZlIixjb29raWVzPWNva2ksaGVhZGVycz1oZWFkYXBwKS50ZXh0CgkJCQkJaWYgIkRpYWtzZXMgbWVuZ2d1bmFrYW4gRmFjZWJvb2siIGluIHJlLmZpbmRhbGwoIlw8dGl0bGVcPiguKj8pPFwvdGl0bGVcPiIsc3RyKGNlaykpOgoJCQkJCQlpbmZvYWt1biArPSAoZiJBcGxpa2FzaSBZYW5nIFRlcmthaXQqXG4iKQoJCQkJCQlpZiAiQW5kYSB0aWRhayBtZW1pbGlraSBhcGxpa2FzaSBhdGF1IHNpdHVzIHdlYiBha3RpZiB1bnR1ayBkaXRpbmphdS4iIGluIGNlazoKCQkJCQkJCWluZm9ha3VuICs9IChmIlRpZGFrIEFkYSBBcGxpa2FzaSBBa3RpZiBZYW5nIFRlcmthaXQgKlxuIikKCQkJCQkJZWxzZToKCQkJCQkJCWluZm9ha3VuICs9IChmIglBcGxpa2FzaSBBa3RpZiA6IFxuIikKCQkJCQkJCWFwa0FrdGlmID0gcmUuZmluZGFsbCgnXC8+PGRpdlwgY2xhc3NcPVwiLio/XCJcPlw8c3BhblwgY2xhc3NcPVwiLio/XCJcPiguKj8pPFwvc3Bhblw+JyxzdHIoY2VrKSkKCQkJCQkJCWRpdGFtYmFoa2FuID0gcmUuZmluZGFsbCgnXDxkaXZcPlw8XC9kaXZcPlw8ZGl2XCBjbGFzc1w9XCIuKj9cIlw+KC4qPyk8XC9kaXZcPicsc3RyKGNlaykpCgkJCQkJCQlmb3IgbXVuY3VsIGluIGFwa0FrdGlmOgoJCQkJCQkJCWhpdDErPTEKCQkJCQkJCQlpbmZvYWt1biArPSAoZiIJCVt7aGl0MX1dIHttdW5jdWx9IHtkaXRhbWJhaGthbltoaXQyXX1cbiIpCgkJCQkJCQkJaGl0Mis9MQoJCQkJCQlpZiAiQW5kYSB0aWRhayBtZW1pbGlraSBhcGxpa2FzaSBhdGF1IHNpdHVzIHdlYiBrZWRhbHV3YXJzYSB1bnR1ayBkaXRpbmphdSIgaW4gY2VrMjoKCQkJCQkJCWluZm9ha3VuICs9IChmIlxuVGlkYWsgQWRhIEFwbGlrYXNpIEtlZGFsdXdhcnNhIFlhbmcgVGVya2FpdFxuIikKCQkJCQkJZWxzZToKCQkJCQkJCWhpdDEsaGl0Mj0wLDAKCQkJCQkJCWluZm9ha3VuICs9IChmIglBcGxpa2FzaSBLZWRhbHV3YXJzYSA6XG4iKQoJCQkJCQkJYXBrS2FkYWx1YXJzYSA9IHJlLmZpbmRhbGwoJ1wvPjxkaXZcIGNsYXNzXD1cIi4qP1wiXD5cPHNwYW5cIGNsYXNzXD1cIi4qP1wiXD4oLio/KTxcL3NwYW5cPicsc3RyKGNlazIpKQoJCQkJCQkJa2FkYWx1YXJzYSA9IHJlLmZpbmRhbGwoJ1w8ZGl2XD5cPFwvZGl2XD5cPGRpdlwgY2xhc3NcPVwiLio/XCJcPiguKj8pPFwvZGl2XD4nLHN0cihjZWsyKSkKCQkJCQkJCWZvciBtdW5jdWwgaW4gYXBrS2FkYWx1YXJzYToKCQkJCQkJCQloaXQxKz0xCgkJCQkJCQkJaW5mb2FrdW4gKz0gKGYiCQlbe2hpdDF9XSB7bXVuY3VsfSB7a2FkYWx1YXJzYVtoaXQyXX1cbiIpCgkJCQkJCQkJaGl0Mis9MQoJCQkJCWVsc2U6cGFzcwoJCQkJCXByaW50KCdcbicpCgkJCQkJc3RhdHVzb2sgPSBmJycnCQkJCQkKICAgXG57aW5mb2FrdW59CQkJCQkKCQkJCQknJycKCQkJCQlzdGF0dXNvazEgPSBuZWwoc3RhdHVzb2ssIHN0eWxlPSdncmVlbicpCgkJCQkJY2V0YWsobmVsKHN0YXR1c29rMSwgdGl0bGU9J09LJykpCgkJCQkJI3JlcXVlc3RzLmdldCgiaHR0cHM6Ly9hcGkudGVsZWdyYW0ub3JnL2JvdCIrc3RyKHRva2VuKSsiL3NlbmRNZXNzYWdlP2NoYXRfaWQ9IitzdHIoSUQpKyImdGV4dD0iK3N0cihzdGF0dXNvaykpCgkJCQkJYnJlYWsKCgoJCQllbHNlOgoJCQkJY29udGludWUKCQlleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CgkJCXRpbWUuc2xlZXAoMzEpCglsb29wKz0xCmRlZiBPKCk6Cgl0cnk6CgkJb3MucmVtb3ZlKCdJRC50eHQnKQoJCW9zLnJlbW92ZSgnb2suY29raS50eHQnKQoJCW9zLnJlbW92ZSgnLnRva2VuLnR4dCcpCgkJb3MucmVtb3ZlKCcuY29rLnR4dCcpCgkJCglleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3IgYXMgZXJyb3I6CgkJCgkJCgkJZXhpdCgpCgkJCgkJCgojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1bIEBGR19vbiBdLS0tLS0tLS0tLS0tLS0tLS0tLS0jCmlmIF9fbmFtZV9fPT0nX19tYWluX18nOgoJdHJ5Om9zLnN5c3RlbSgnZ2l0IHB1bGwnKQoJZXhjZXB0OnBhc3MKCXRyeTpvcy5ta2RpcignT0snKQoJZXhjZXB0OnBhc3MKCXRyeTpvcy5ta2RpcignQ1AnKQoJZXhjZXB0OnBhc3MKCXRyeTpvcy5ta2RpcignL3NkY2FyZC9BTFZJTk8tRFVNUCcpCglleGNlcHQ6cGFzcwoJdHJ5Om9zLnN5c3RlbSgndG91Y2ggLnByb3gudHh0JykKCWV4Y2VwdDpwYXNzCgl0cnk6b3Muc3lzdGVtKCdwa2cgaW5zdGFsbCBwbGF5LWF1ZGlvJykKCWV4Y2VwdDpwYXNzCgl0cnk6b3Muc3lzdGVtKCdjbGVhcicpCglleGNlcHQ6cGFzcwoJCglMb2dpbigpCg=='))